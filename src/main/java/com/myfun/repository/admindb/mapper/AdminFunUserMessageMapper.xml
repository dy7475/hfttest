<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myfun.repository.admindb.dao.AdminFunUserMessageMapper">
  <resultMap id="BaseResultMap" type="com.myfun.repository.admindb.po.AdminFunUserMessage">
    <!--@mbggenerated-->
    <id column="ID" jdbcType="INTEGER" property="id" />
    <result column="CITY_ID" jdbcType="INTEGER" property="cityId" />
    <result column="APP_TYPE" jdbcType="INTEGER" property="appType" />
    <result column="ARCHIVE_ID" jdbcType="INTEGER" property="archiveId" />
    <result column="USER_MOBILE" jdbcType="VARCHAR" property="userMobile" />
    <result column="SOCKET_ID" jdbcType="VARCHAR" property="socketId" />
    <result column="MSG_MODULE" jdbcType="INTEGER" property="msgModule" />
    <result column="MODULE_TYPE" jdbcType="INTEGER" property="moduleType" />
    <result column="CASE_ID" jdbcType="INTEGER" property="caseId" />
    <result column="CASE_TYPE" jdbcType="INTEGER" property="caseType" />
    <result column="HOUSE_USEAGE" jdbcType="TINYINT" property="houseUseage" />
    <result column="MSG_CONTENT" jdbcType="VARCHAR" property="msgContent" />
    <result column="IS_DEL" jdbcType="TINYINT" property="isDel" />
    <result column="INVALID_TIME" jdbcType="TIMESTAMP" property="invalidTime" />
    <result column="CREATION_TIME" jdbcType="TIMESTAMP" property="creationTime" />
    <result column="CASE_NO" jdbcType="VARCHAR" property="caseNo" />
    <result column="CREATE_ARCHIVE_ID" jdbcType="INTEGER" property="createArchiveId" />
    <result column="CREATE_USER_NAME" jdbcType="VARCHAR" property="createUserName" />
    <result column="TARGET_ID" jdbcType="INTEGER" property="targetId" />
    <result column="COMP_ID" jdbcType="INTEGER" property="compId" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--@mbggenerated-->
    ID, CITY_ID, APP_TYPE, ARCHIVE_ID, USER_MOBILE, SOCKET_ID, MSG_MODULE, MODULE_TYPE, 
    CASE_ID, CASE_TYPE, HOUSE_USEAGE, MSG_CONTENT, IS_DEL, INVALID_TIME, CREATION_TIME, 
    CASE_NO, CREATE_ARCHIVE_ID, CREATE_USER_NAME, TARGET_ID, COMP_ID
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--@mbggenerated-->
    select 
    <include refid="Base_Column_List" />
    from FUN_USER_MESSAGE
    where ID = #{id,jdbcType=INTEGER}
  </select>

  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--@mbggenerated-->
    delete from FUN_USER_MESSAGE
    where ID = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" keyProperty="id" parameterType="com.myfun.repository.admindb.po.AdminFunUserMessage" useGeneratedKeys="true">
    <!--@mbggenerated-->
    insert into FUN_USER_MESSAGE (CITY_ID, APP_TYPE, ARCHIVE_ID, 
      USER_MOBILE, SOCKET_ID, MSG_MODULE, 
      MODULE_TYPE, CASE_ID, CASE_TYPE, 
      HOUSE_USEAGE, MSG_CONTENT, IS_DEL, 
      INVALID_TIME, CREATION_TIME, CASE_NO, 
      CREATE_ARCHIVE_ID, CREATE_USER_NAME, TARGET_ID, 
      COMP_ID)
    values (#{cityId,jdbcType=INTEGER}, #{appType,jdbcType=INTEGER}, #{archiveId,jdbcType=INTEGER}, 
      #{userMobile,jdbcType=VARCHAR}, #{socketId,jdbcType=VARCHAR}, #{msgModule,jdbcType=INTEGER}, 
      #{moduleType,jdbcType=INTEGER}, #{caseId,jdbcType=INTEGER}, #{caseType,jdbcType=INTEGER}, 
      #{houseUseage,jdbcType=TINYINT}, #{msgContent,jdbcType=VARCHAR}, #{isDel,jdbcType=TINYINT}, 
      #{invalidTime,jdbcType=TIMESTAMP}, #{creationTime,jdbcType=TIMESTAMP}, #{caseNo,jdbcType=VARCHAR}, 
      #{createArchiveId,jdbcType=INTEGER}, #{createUserName,jdbcType=VARCHAR}, #{targetId,jdbcType=INTEGER}, 
      #{compId,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" keyProperty="id" parameterType="com.myfun.repository.admindb.po.AdminFunUserMessage" useGeneratedKeys="true">
    <!--@mbggenerated-->
    insert into FUN_USER_MESSAGE
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="cityId != null">
        CITY_ID,
      </if>
      <if test="appType != null">
        APP_TYPE,
      </if>
      <if test="archiveId != null">
        ARCHIVE_ID,
      </if>
      <if test="userMobile != null">
        USER_MOBILE,
      </if>
      <if test="socketId != null">
        SOCKET_ID,
      </if>
      <if test="msgModule != null">
        MSG_MODULE,
      </if>
      <if test="moduleType != null">
        MODULE_TYPE,
      </if>
      <if test="caseId != null">
        CASE_ID,
      </if>
      <if test="caseType != null">
        CASE_TYPE,
      </if>
      <if test="houseUseage != null">
        HOUSE_USEAGE,
      </if>
      <if test="msgContent != null">
        MSG_CONTENT,
      </if>
      <if test="isDel != null">
        IS_DEL,
      </if>
      <if test="invalidTime != null">
        INVALID_TIME,
      </if>
      <if test="creationTime != null">
        CREATION_TIME,
      </if>
      <if test="caseNo != null">
        CASE_NO,
      </if>
      <if test="createArchiveId != null">
        CREATE_ARCHIVE_ID,
      </if>
      <if test="createUserName != null">
        CREATE_USER_NAME,
      </if>
      <if test="targetId != null">
        TARGET_ID,
      </if>
      <if test="compId != null">
        COMP_ID,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="cityId != null">
        #{cityId,jdbcType=INTEGER},
      </if>
      <if test="appType != null">
        #{appType,jdbcType=INTEGER},
      </if>
      <if test="archiveId != null">
        #{archiveId,jdbcType=INTEGER},
      </if>
      <if test="userMobile != null">
        #{userMobile,jdbcType=VARCHAR},
      </if>
      <if test="socketId != null">
        #{socketId,jdbcType=VARCHAR},
      </if>
      <if test="msgModule != null">
        #{msgModule,jdbcType=INTEGER},
      </if>
      <if test="moduleType != null">
        #{moduleType,jdbcType=INTEGER},
      </if>
      <if test="caseId != null">
        #{caseId,jdbcType=INTEGER},
      </if>
      <if test="caseType != null">
        #{caseType,jdbcType=INTEGER},
      </if>
      <if test="houseUseage != null">
        #{houseUseage,jdbcType=TINYINT},
      </if>
      <if test="msgContent != null">
        #{msgContent,jdbcType=VARCHAR},
      </if>
      <if test="isDel != null">
        #{isDel,jdbcType=TINYINT},
      </if>
      <if test="invalidTime != null">
        #{invalidTime,jdbcType=TIMESTAMP},
      </if>
      <if test="creationTime != null">
        #{creationTime,jdbcType=TIMESTAMP},
      </if>
      <if test="caseNo != null">
        #{caseNo,jdbcType=VARCHAR},
      </if>
      <if test="createArchiveId != null">
        #{createArchiveId,jdbcType=INTEGER},
      </if>
      <if test="createUserName != null">
        #{createUserName,jdbcType=VARCHAR},
      </if>
      <if test="targetId != null">
        #{targetId,jdbcType=INTEGER},
      </if>
      <if test="compId != null">
        #{compId,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.myfun.repository.admindb.po.AdminFunUserMessage">
    <!--@mbggenerated-->
    update FUN_USER_MESSAGE
    <set>
      <if test="cityId != null">
        CITY_ID = #{cityId,jdbcType=INTEGER},
      </if>
      <if test="appType != null">
        APP_TYPE = #{appType,jdbcType=INTEGER},
      </if>
      <if test="archiveId != null">
        ARCHIVE_ID = #{archiveId,jdbcType=INTEGER},
      </if>
      <if test="userMobile != null">
        USER_MOBILE = #{userMobile,jdbcType=VARCHAR},
      </if>
      <if test="socketId != null">
        SOCKET_ID = #{socketId,jdbcType=VARCHAR},
      </if>
      <if test="msgModule != null">
        MSG_MODULE = #{msgModule,jdbcType=INTEGER},
      </if>
      <if test="moduleType != null">
        MODULE_TYPE = #{moduleType,jdbcType=INTEGER},
      </if>
      <if test="caseId != null">
        CASE_ID = #{caseId,jdbcType=INTEGER},
      </if>
      <if test="caseType != null">
        CASE_TYPE = #{caseType,jdbcType=INTEGER},
      </if>
      <if test="houseUseage != null">
        HOUSE_USEAGE = #{houseUseage,jdbcType=TINYINT},
      </if>
      <if test="msgContent != null">
        MSG_CONTENT = #{msgContent,jdbcType=VARCHAR},
      </if>
      <if test="isDel != null">
        IS_DEL = #{isDel,jdbcType=TINYINT},
      </if>
      <if test="invalidTime != null">
        INVALID_TIME = #{invalidTime,jdbcType=TIMESTAMP},
      </if>
      <if test="creationTime != null">
        CREATION_TIME = #{creationTime,jdbcType=TIMESTAMP},
      </if>
      <if test="caseNo != null">
        CASE_NO = #{caseNo,jdbcType=VARCHAR},
      </if>
      <if test="createArchiveId != null">
        CREATE_ARCHIVE_ID = #{createArchiveId,jdbcType=INTEGER},
      </if>
      <if test="createUserName != null">
        CREATE_USER_NAME = #{createUserName,jdbcType=VARCHAR},
      </if>
      <if test="targetId != null">
        TARGET_ID = #{targetId,jdbcType=INTEGER},
      </if>
      <if test="compId != null">
        COMP_ID = #{compId,jdbcType=INTEGER},
      </if>
    </set>
    where ID = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.myfun.repository.admindb.po.AdminFunUserMessage">
    <!--@mbggenerated-->
    update FUN_USER_MESSAGE
    set CITY_ID = #{cityId,jdbcType=INTEGER},
      APP_TYPE = #{appType,jdbcType=INTEGER},
      ARCHIVE_ID = #{archiveId,jdbcType=INTEGER},
      USER_MOBILE = #{userMobile,jdbcType=VARCHAR},
      SOCKET_ID = #{socketId,jdbcType=VARCHAR},
      MSG_MODULE = #{msgModule,jdbcType=INTEGER},
      MODULE_TYPE = #{moduleType,jdbcType=INTEGER},
      CASE_ID = #{caseId,jdbcType=INTEGER},
      CASE_TYPE = #{caseType,jdbcType=INTEGER},
      HOUSE_USEAGE = #{houseUseage,jdbcType=TINYINT},
      MSG_CONTENT = #{msgContent,jdbcType=VARCHAR},
      IS_DEL = #{isDel,jdbcType=TINYINT},
      INVALID_TIME = #{invalidTime,jdbcType=TIMESTAMP},
      CREATION_TIME = #{creationTime,jdbcType=TIMESTAMP},
      CASE_NO = #{caseNo,jdbcType=VARCHAR},
      CREATE_ARCHIVE_ID = #{createArchiveId,jdbcType=INTEGER},
      CREATE_USER_NAME = #{createUserName,jdbcType=VARCHAR},
      TARGET_ID = #{targetId,jdbcType=INTEGER},
      COMP_ID = #{compId,jdbcType=INTEGER}
    where ID = #{id,jdbcType=INTEGER}
  </update>
	<delete id="deleteMessage">
		delete from FUN_USER_MESSAGE
		where MSG_MODULE = #{msgModule} AND MODULE_TYPE =#{moduleType} AND  CASE_ID = #{caseId} AND  CASE_TYPE = #{caseType } AND  ARCHIVE_ID = #{archiveId}
	</delete>

  <delete id="deleteMessageByCondition">
        delete from FUN_USER_MESSAGE
		where ARCHIVE_ID = #{archiveId}
		<if test="null != caseId">  AND CASE_ID = #{caseId} </if>
		<if test="null != caseType">   AND  CASE_TYPE = #{caseType } </if>
		<if test="null != msgModule">    AND MSG_MODULE =#{msgModule} </if>
  </delete>
  <select id="getMessageBaseInfoList" resultMap="BaseResultMap">
        select MSG_MODULE,CASE_ID,CASE_TYPE from FUN_USER_MESSAGE
        WHERE ARCHIVE_ID=#{archiveId} and IS_DEL =0 AND MODULE_TYPE !=1
        GROUP BY MSG_MODULE,CASE_ID,CASE_TYPE
        ORDER BY CASE_ID desc
  </select>
  <select id="getMessageRichInfoList" resultMap="BaseResultMap">
        select CASE_ID,CASE_TYPE,CASE_NO,HOUSE_USEAGE,MSG_CONTENT,MSG_MODULE,CREATE_USER_NAME,
         CREATE_ARCHIVE_ID,TARGET_ID,CREATION_TIME from FUN_USER_MESSAGE
        WHERE ARCHIVE_ID=#{archiveId} and IS_DEL =0 AND MODULE_TYPE !=1
        <if test="null != msgModule">  AND MSG_MODULE =#{msgModule} </if>
        ORDER BY ID desc
  </select>
</mapper>