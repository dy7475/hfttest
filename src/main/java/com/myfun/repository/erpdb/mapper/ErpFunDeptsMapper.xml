<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myfun.repository.erpdb.dao.ErpFunDeptsMapper">
  <resultMap id="BaseResultMap" type="com.myfun.repository.erpdb.po.ErpFunDepts">
    <!--@mbggenerated-->
    <id column="DEPT_ID" jdbcType="INTEGER" property="deptId" />
    <result column="COMP_ID" jdbcType="INTEGER" property="compId" />
    <result column="REG_ID" jdbcType="INTEGER" property="regId" />
    <result column="COMP_NO" jdbcType="VARCHAR" property="compNo" />
    <result column="DEPT_NO" jdbcType="VARCHAR" property="deptNo" />
    <result column="REGION_ID" jdbcType="INTEGER" property="regionId" />
    <result column="SEQ_NO" jdbcType="INTEGER" property="seqNo" />
    <result column="DEPT_NAME" jdbcType="VARCHAR" property="deptName" />
    <result column="DEPT_CODE" jdbcType="VARCHAR" property="deptCode" />
    <result column="DEPT_ADDR" jdbcType="VARCHAR" property="deptAddr" />
    <result column="DEPT_TELE" jdbcType="VARCHAR" property="deptTele" />
    <result column="DEPT_CONTACT" jdbcType="VARCHAR" property="deptContact" />
    <result column="DEPT_DESC" jdbcType="VARCHAR" property="deptDesc" />
    <result column="DEPT_FLAG" jdbcType="INTEGER" property="deptFlag" />
    <result column="ROAM_NUM" jdbcType="TINYINT" property="roamNum" />
    <result column="USER_NUM" jdbcType="INTEGER" property="userNum" />
    <result column="DEPT_TYPE" jdbcType="TINYINT" property="deptType" />
    <result column="CUST_LEVEL" jdbcType="TINYINT" property="custLevel" />
    <result column="UPDATE_UID" jdbcType="INTEGER" property="updateUid" />
    <result column="UPDATE_TIME" jdbcType="VARCHAR" property="updateTime" />
    <result column="AREA_ID" jdbcType="INTEGER" property="areaId" />
    <result column="DDHAOFANG_FLAG" jdbcType="TINYINT" property="ddhaofangFlag" />
    <result column="DEPT_CNAME" jdbcType="VARCHAR" property="deptCname" />
    <result column="BUY_ACCOUNT_NUM" jdbcType="INTEGER" property="buyAccountNum" />
    <result column="IS_HEADQUARTERS" jdbcType="TINYINT" property="isHeadquarters" />
    <result column="IS_UNPAID_DEPT" jdbcType="TINYINT" property="isUnpaidDept" />
    <result column="STATISTICS_FLAG" jdbcType="TINYINT" property="statisticsFlag" />
    <result column="HIDDEN_ORGANIZATION" jdbcType="TINYINT" property="hiddenOrganization" />
    <result column="SUPPORT_PROPERTY_FLAG" jdbcType="TINYINT" property="supportPropertyFlag" />
    <result column="PARTNER_ID" jdbcType="INTEGER" property="partnerId" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--@mbggenerated-->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--@mbggenerated-->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--@mbggenerated-->
    DEPT_ID, COMP_ID, REG_ID, COMP_NO, DEPT_NO, REGION_ID, SEQ_NO, DEPT_NAME, DEPT_CODE, 
    DEPT_ADDR, DEPT_TELE, DEPT_CONTACT, DEPT_DESC, DEPT_FLAG, ROAM_NUM, USER_NUM, DEPT_TYPE, 
    CUST_LEVEL, UPDATE_UID, UPDATE_TIME, AREA_ID, DDHAOFANG_FLAG, DEPT_CNAME, BUY_ACCOUNT_NUM, 
    IS_HEADQUARTERS, IS_UNPAID_DEPT, STATISTICS_FLAG, HIDDEN_ORGANIZATION, SUPPORT_PROPERTY_FLAG, 
    PARTNER_ID
  </sql>
  <select id="selectByExample" parameterType="com.myfun.repository.erpdb.po.ErpFunDeptsExample" resultMap="BaseResultMap">
    <!--@mbggenerated-->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from FUN_DEPTS
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--@mbggenerated-->
    select 
    <include refid="Base_Column_List" />
    from FUN_DEPTS
    where DEPT_ID = #{deptId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--@mbggenerated-->
    delete from FUN_DEPTS
    where DEPT_ID = #{deptId,jdbcType=INTEGER}
  </delete>
  <delete id="deleteByExample" parameterType="com.myfun.repository.erpdb.po.ErpFunDeptsExample">
    <!--@mbggenerated-->
    delete from FUN_DEPTS
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.myfun.repository.erpdb.po.ErpFunDepts">
    <!--@mbggenerated-->
    <selectKey keyProperty="deptId" order="AFTER" resultType="java.lang.Integer">
      SELECT MAX(ISNULL(DEPT_ID,0))+1 FROM FUN_DEPTS
    </selectKey>
    insert into FUN_DEPTS (COMP_ID, REG_ID, COMP_NO,
      DEPT_NO, REGION_ID, SEQ_NO,
      DEPT_NAME, DEPT_CODE, DEPT_ADDR,
      DEPT_TELE, DEPT_CONTACT, DEPT_DESC,
      DEPT_FLAG, ROAM_NUM, USER_NUM,
      DEPT_TYPE, CUST_LEVEL, UPDATE_UID,
      UPDATE_TIME, AREA_ID, DDHAOFANG_FLAG,
      DEPT_CNAME, BUY_ACCOUNT_NUM, IS_HEADQUARTERS,
      IS_UNPAID_DEPT, STATISTICS_FLAG, HIDDEN_ORGANIZATION,
      SUPPORT_PROPERTY_FLAG,PARTNER_ID)
    values (#{compId,jdbcType=INTEGER}, #{regId,jdbcType=INTEGER}, #{compNo,jdbcType=VARCHAR},
      #{deptNo,jdbcType=VARCHAR}, #{regionId,jdbcType=INTEGER}, #{seqNo,jdbcType=INTEGER},
      #{deptName,jdbcType=VARCHAR}, #{deptCode,jdbcType=VARCHAR}, #{deptAddr,jdbcType=VARCHAR},
      #{deptTele,jdbcType=VARCHAR}, #{deptContact,jdbcType=VARCHAR}, #{deptDesc,jdbcType=VARCHAR},
      #{deptFlag,jdbcType=INTEGER}, #{roamNum,jdbcType=TINYINT}, #{userNum,jdbcType=INTEGER},
      #{deptType,jdbcType=TINYINT}, #{custLevel,jdbcType=TINYINT}, #{updateUid,jdbcType=INTEGER},
      #{updateTime,jdbcType=VARCHAR}, #{areaId,jdbcType=INTEGER}, #{ddhaofangFlag,jdbcType=TINYINT},
      #{deptCname,jdbcType=VARCHAR}, #{buyAccountNum,jdbcType=INTEGER}, #{isHeadquarters,jdbcType=TINYINT},
      #{isUnpaidDept,jdbcType=TINYINT}, #{statisticsFlag,jdbcType=TINYINT}, #{hiddenOrganization,jdbcType=TINYINT},
      #{supportPropertyFlag,jdbcType=TINYINT},#{partnerId,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.myfun.repository.erpdb.po.ErpFunDepts">
    <!--@mbggenerated-->
    <selectKey keyProperty="deptId" order="BEFORE" resultType="java.lang.Integer">
      SELECT MAX(ISNULL(DEPT_ID,0))+1 FROM FUN_DEPTS
    </selectKey>
    insert into FUN_DEPTS
    <trim prefix="(" suffix=")" suffixOverrides=",">
      DEPT_ID,
      <if test="compId != null">
        COMP_ID,
      </if>
      <if test="regId != null">
        REG_ID,
      </if>
      <if test="compNo != null">
        COMP_NO,
      </if>
      <if test="deptNo != null">
        DEPT_NO,
      </if>
      <if test="regionId != null">
        REGION_ID,
      </if>
      <if test="seqNo != null">
        SEQ_NO,
      </if>
      <if test="deptName != null">
        DEPT_NAME,
      </if>
      <if test="deptCode != null">
        DEPT_CODE,
      </if>
      <if test="deptAddr != null">
        DEPT_ADDR,
      </if>
      <if test="deptTele != null">
        DEPT_TELE,
      </if>
      <if test="deptContact != null">
        DEPT_CONTACT,
      </if>
      <if test="deptDesc != null">
        DEPT_DESC,
      </if>
      <if test="deptFlag != null">
        DEPT_FLAG,
      </if>
      <if test="roamNum != null">
        ROAM_NUM,
      </if>
      <if test="userNum != null">
        USER_NUM,
      </if>
      <if test="deptType != null">
        DEPT_TYPE,
      </if>
      <if test="custLevel != null">
        CUST_LEVEL,
      </if>
      <if test="updateUid != null">
        UPDATE_UID,
      </if>
      <if test="updateTime != null">
        UPDATE_TIME,
      </if>
      <if test="areaId != null">
        AREA_ID,
      </if>
      <if test="ddhaofangFlag != null">
        DDHAOFANG_FLAG,
      </if>
      <if test="deptCname != null">
        DEPT_CNAME,
      </if>
      <if test="buyAccountNum != null">
        BUY_ACCOUNT_NUM,
      </if>
      <if test="isHeadquarters != null">
        IS_HEADQUARTERS,
      </if>
      <if test="isUnpaidDept != null">
        IS_UNPAID_DEPT,
      </if>
      <if test="statisticsFlag != null">
        STATISTICS_FLAG,
      </if>
      <if test="hiddenOrganization != null">
        HIDDEN_ORGANIZATION,
      </if>
      <if test="supportPropertyFlag != null">
        SUPPORT_PROPERTY_FLAG,
      </if>
      <if test="partnerId != null">
        PARTNER_ID,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      #{deptId,jdbcType=INTEGER},
      <if test="compId != null">
        #{compId,jdbcType=INTEGER},
      </if>
      <if test="regId != null">
        #{regId,jdbcType=INTEGER},
      </if>
      <if test="compNo != null">
        #{compNo,jdbcType=VARCHAR},
      </if>
      <if test="deptNo != null">
        #{deptNo,jdbcType=VARCHAR},
      </if>
      <if test="regionId != null">
        #{regionId,jdbcType=INTEGER},
      </if>
      <if test="seqNo != null">
        #{seqNo,jdbcType=INTEGER},
      </if>
      <if test="deptName != null">
        #{deptName,jdbcType=VARCHAR},
      </if>
      <if test="deptCode != null">
        #{deptCode,jdbcType=VARCHAR},
      </if>
      <if test="deptAddr != null">
        #{deptAddr,jdbcType=VARCHAR},
      </if>
      <if test="deptTele != null">
        #{deptTele,jdbcType=VARCHAR},
      </if>
      <if test="deptContact != null">
        #{deptContact,jdbcType=VARCHAR},
      </if>
      <if test="deptDesc != null">
        #{deptDesc,jdbcType=VARCHAR},
      </if>
      <if test="deptFlag != null">
        #{deptFlag,jdbcType=INTEGER},
      </if>
      <if test="roamNum != null">
        #{roamNum,jdbcType=TINYINT},
      </if>
      <if test="userNum != null">
        #{userNum,jdbcType=INTEGER},
      </if>
      <if test="deptType != null">
        #{deptType,jdbcType=TINYINT},
      </if>
      <if test="custLevel != null">
        #{custLevel,jdbcType=TINYINT},
      </if>
      <if test="updateUid != null">
        #{updateUid,jdbcType=INTEGER},
      </if>
      <if test="updateTime != null">
        #{updateTime,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null">
        #{areaId,jdbcType=INTEGER},
      </if>
      <if test="ddhaofangFlag != null">
        #{ddhaofangFlag,jdbcType=TINYINT},
      </if>
      <if test="deptCname != null">
        #{deptCname,jdbcType=VARCHAR},
      </if>
      <if test="buyAccountNum != null">
        #{buyAccountNum,jdbcType=INTEGER},
      </if>
      <if test="isHeadquarters != null">
        #{isHeadquarters,jdbcType=TINYINT},
      </if>
      <if test="isUnpaidDept != null">
        #{isUnpaidDept,jdbcType=TINYINT},
      </if>
      <if test="statisticsFlag != null">
        #{statisticsFlag,jdbcType=TINYINT},
      </if>
      <if test="hiddenOrganization != null">
        #{hiddenOrganization,jdbcType=TINYINT},
      </if>
      <if test="supportPropertyFlag != null">
        #{supportPropertyFlag,jdbcType=TINYINT},
      </if>
      <if test="partnerId != null">
        #{partnerId,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.myfun.repository.erpdb.po.ErpFunDeptsExample" resultType="java.lang.Integer">
    <!--@mbggenerated-->
    select count(*) from FUN_DEPTS
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--@mbggenerated-->
    update FUN_DEPTS
    <set>
      <if test="record.deptId != null">
        DEPT_ID = #{record.deptId,jdbcType=INTEGER},
      </if>
      <if test="record.compId != null">
        COMP_ID = #{record.compId,jdbcType=INTEGER},
      </if>
      <if test="record.regId != null">
        REG_ID = #{record.regId,jdbcType=INTEGER},
      </if>
      <if test="record.compNo != null">
        COMP_NO = #{record.compNo,jdbcType=VARCHAR},
      </if>
      <if test="record.deptNo != null">
        DEPT_NO = #{record.deptNo,jdbcType=VARCHAR},
      </if>
      <if test="record.regionId != null">
        REGION_ID = #{record.regionId,jdbcType=INTEGER},
      </if>
      <if test="record.seqNo != null">
        SEQ_NO = #{record.seqNo,jdbcType=INTEGER},
      </if>
      <if test="record.deptName != null">
        DEPT_NAME = #{record.deptName,jdbcType=VARCHAR},
      </if>
      <if test="record.deptCode != null">
        DEPT_CODE = #{record.deptCode,jdbcType=VARCHAR},
      </if>
      <if test="record.deptAddr != null">
        DEPT_ADDR = #{record.deptAddr,jdbcType=VARCHAR},
      </if>
      <if test="record.deptTele != null">
        DEPT_TELE = #{record.deptTele,jdbcType=VARCHAR},
      </if>
      <if test="record.deptContact != null">
        DEPT_CONTACT = #{record.deptContact,jdbcType=VARCHAR},
      </if>
      <if test="record.deptDesc != null">
        DEPT_DESC = #{record.deptDesc,jdbcType=VARCHAR},
      </if>
      <if test="record.deptFlag != null">
        DEPT_FLAG = #{record.deptFlag,jdbcType=INTEGER},
      </if>
      <if test="record.roamNum != null">
        ROAM_NUM = #{record.roamNum,jdbcType=TINYINT},
      </if>
      <if test="record.userNum != null">
        USER_NUM = #{record.userNum,jdbcType=INTEGER},
      </if>
      <if test="record.deptType != null">
        DEPT_TYPE = #{record.deptType,jdbcType=TINYINT},
      </if>
      <if test="record.custLevel != null">
        CUST_LEVEL = #{record.custLevel,jdbcType=TINYINT},
      </if>
      <if test="record.updateUid != null">
        UPDATE_UID = #{record.updateUid,jdbcType=INTEGER},
      </if>
      <if test="record.updateTime != null">
        UPDATE_TIME = #{record.updateTime,jdbcType=VARCHAR},
      </if>
      <if test="record.areaId != null">
        AREA_ID = #{record.areaId,jdbcType=INTEGER},
      </if>
      <if test="record.ddhaofangFlag != null">
        DDHAOFANG_FLAG = #{record.ddhaofangFlag,jdbcType=TINYINT},
      </if>
      <if test="record.deptCname != null">
        DEPT_CNAME = #{record.deptCname,jdbcType=VARCHAR},
      </if>
      <if test="record.buyAccountNum != null">
        BUY_ACCOUNT_NUM = #{record.buyAccountNum,jdbcType=INTEGER},
      </if>
      <if test="record.isHeadquarters != null">
        IS_HEADQUARTERS = #{record.isHeadquarters,jdbcType=TINYINT},
      </if>
      <if test="record.isUnpaidDept != null">
        IS_UNPAID_DEPT = #{record.isUnpaidDept,jdbcType=TINYINT},
      </if>
      <if test="record.statisticsFlag != null">
        STATISTICS_FLAG = #{record.statisticsFlag,jdbcType=TINYINT},
      </if>
      <if test="record.hiddenOrganization != null">
        HIDDEN_ORGANIZATION = #{record.hiddenOrganization,jdbcType=TINYINT},
      </if>
      <if test="record.supportPropertyFlag != null">
        SUPPORT_PROPERTY_FLAG = #{record.supportPropertyFlag,jdbcType=TINYINT},
      </if>
      <if test="record.partnerId != null">
        PARTNER_ID = #{record.partnerId,jdbcType=INTEGER},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--@mbggenerated-->
    update FUN_DEPTS
    set DEPT_ID = #{record.deptId,jdbcType=INTEGER},
      COMP_ID = #{record.compId,jdbcType=INTEGER},
      REG_ID = #{record.regId,jdbcType=INTEGER},
      COMP_NO = #{record.compNo,jdbcType=VARCHAR},
      DEPT_NO = #{record.deptNo,jdbcType=VARCHAR},
      REGION_ID = #{record.regionId,jdbcType=INTEGER},
      SEQ_NO = #{record.seqNo,jdbcType=INTEGER},
      DEPT_NAME = #{record.deptName,jdbcType=VARCHAR},
      DEPT_CODE = #{record.deptCode,jdbcType=VARCHAR},
      DEPT_ADDR = #{record.deptAddr,jdbcType=VARCHAR},
      DEPT_TELE = #{record.deptTele,jdbcType=VARCHAR},
      DEPT_CONTACT = #{record.deptContact,jdbcType=VARCHAR},
      DEPT_DESC = #{record.deptDesc,jdbcType=VARCHAR},
      DEPT_FLAG = #{record.deptFlag,jdbcType=INTEGER},
      ROAM_NUM = #{record.roamNum,jdbcType=TINYINT},
      USER_NUM = #{record.userNum,jdbcType=INTEGER},
      DEPT_TYPE = #{record.deptType,jdbcType=TINYINT},
      CUST_LEVEL = #{record.custLevel,jdbcType=TINYINT},
      UPDATE_UID = #{record.updateUid,jdbcType=INTEGER},
      UPDATE_TIME = #{record.updateTime,jdbcType=VARCHAR},
      AREA_ID = #{record.areaId,jdbcType=INTEGER},
      DDHAOFANG_FLAG = #{record.ddhaofangFlag,jdbcType=TINYINT},
      DEPT_CNAME = #{record.deptCname,jdbcType=VARCHAR},
      BUY_ACCOUNT_NUM = #{record.buyAccountNum,jdbcType=INTEGER},
      IS_HEADQUARTERS = #{record.isHeadquarters,jdbcType=TINYINT},
      IS_UNPAID_DEPT = #{record.isUnpaidDept,jdbcType=TINYINT},
      STATISTICS_FLAG = #{record.statisticsFlag,jdbcType=TINYINT},
      HIDDEN_ORGANIZATION = #{record.hiddenOrganization,jdbcType=TINYINT},
      SUPPORT_PROPERTY_FLAG = #{record.supportPropertyFlag,jdbcType=TINYINT},
      PARTNER_ID = #{record.partnerId,jdbcType=INTEGER}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.myfun.repository.erpdb.po.ErpFunDepts">
    <!--@mbggenerated-->
    update FUN_DEPTS
    <set>
      <if test="compId != null">
        COMP_ID = #{compId,jdbcType=INTEGER},
      </if>
      <if test="regId != null">
        REG_ID = #{regId,jdbcType=INTEGER},
      </if>
      <if test="compNo != null">
        COMP_NO = #{compNo,jdbcType=VARCHAR},
      </if>
      <if test="deptNo != null">
        DEPT_NO = #{deptNo,jdbcType=VARCHAR},
      </if>
      <if test="regionId != null">
        REGION_ID = #{regionId,jdbcType=INTEGER},
      </if>
      <if test="seqNo != null">
        SEQ_NO = #{seqNo,jdbcType=INTEGER},
      </if>
      <if test="deptName != null">
        DEPT_NAME = #{deptName,jdbcType=VARCHAR},
      </if>
      <if test="deptCode != null">
        DEPT_CODE = #{deptCode,jdbcType=VARCHAR},
      </if>
      <if test="deptAddr != null">
        DEPT_ADDR = #{deptAddr,jdbcType=VARCHAR},
      </if>
      <if test="deptTele != null">
        DEPT_TELE = #{deptTele,jdbcType=VARCHAR},
      </if>
      <if test="deptContact != null">
        DEPT_CONTACT = #{deptContact,jdbcType=VARCHAR},
      </if>
      <if test="deptDesc != null">
        DEPT_DESC = #{deptDesc,jdbcType=VARCHAR},
      </if>
      <if test="deptFlag != null">
        DEPT_FLAG = #{deptFlag,jdbcType=INTEGER},
      </if>
      <if test="roamNum != null">
        ROAM_NUM = #{roamNum,jdbcType=TINYINT},
      </if>
      <if test="userNum != null">
        USER_NUM = #{userNum,jdbcType=INTEGER},
      </if>
      <if test="deptType != null">
        DEPT_TYPE = #{deptType,jdbcType=TINYINT},
      </if>
      <if test="custLevel != null">
        CUST_LEVEL = #{custLevel,jdbcType=TINYINT},
      </if>
      <if test="updateUid != null">
        UPDATE_UID = #{updateUid,jdbcType=INTEGER},
      </if>
      <if test="updateTime != null">
        UPDATE_TIME = #{updateTime,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null">
        AREA_ID = #{areaId,jdbcType=INTEGER},
      </if>
      <if test="ddhaofangFlag != null">
        DDHAOFANG_FLAG = #{ddhaofangFlag,jdbcType=TINYINT},
      </if>
      <if test="deptCname != null">
        DEPT_CNAME = #{deptCname,jdbcType=VARCHAR},
      </if>
      <if test="buyAccountNum != null">
        BUY_ACCOUNT_NUM = #{buyAccountNum,jdbcType=INTEGER},
      </if>
      <if test="isHeadquarters != null">
        IS_HEADQUARTERS = #{isHeadquarters,jdbcType=TINYINT},
      </if>
      <if test="isUnpaidDept != null">
        IS_UNPAID_DEPT = #{isUnpaidDept,jdbcType=TINYINT},
      </if>
      <if test="statisticsFlag != null">
        STATISTICS_FLAG = #{statisticsFlag,jdbcType=TINYINT},
      </if>
      <if test="hiddenOrganization != null">
        HIDDEN_ORGANIZATION = #{hiddenOrganization,jdbcType=TINYINT},
      </if>
      <if test="supportPropertyFlag != null">
        SUPPORT_PROPERTY_FLAG = #{supportPropertyFlag,jdbcType=TINYINT},
      </if>
      <if test="partnerId != null">
        PARTNER_ID = #{partnerId,jdbcType=INTEGER},
      </if>
    </set>
    where DEPT_ID = #{deptId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.myfun.repository.erpdb.po.ErpFunDepts">
    <!--@mbggenerated-->
    update FUN_DEPTS
    set COMP_ID = #{compId,jdbcType=INTEGER},
      REG_ID = #{regId,jdbcType=INTEGER},
      COMP_NO = #{compNo,jdbcType=VARCHAR},
      DEPT_NO = #{deptNo,jdbcType=VARCHAR},
      REGION_ID = #{regionId,jdbcType=INTEGER},
      SEQ_NO = #{seqNo,jdbcType=INTEGER},
      DEPT_NAME = #{deptName,jdbcType=VARCHAR},
      DEPT_CODE = #{deptCode,jdbcType=VARCHAR},
      DEPT_ADDR = #{deptAddr,jdbcType=VARCHAR},
      DEPT_TELE = #{deptTele,jdbcType=VARCHAR},
      DEPT_CONTACT = #{deptContact,jdbcType=VARCHAR},
      DEPT_DESC = #{deptDesc,jdbcType=VARCHAR},
      DEPT_FLAG = #{deptFlag,jdbcType=INTEGER},
      ROAM_NUM = #{roamNum,jdbcType=TINYINT},
      USER_NUM = #{userNum,jdbcType=INTEGER},
      DEPT_TYPE = #{deptType,jdbcType=TINYINT},
      CUST_LEVEL = #{custLevel,jdbcType=TINYINT},
      UPDATE_UID = #{updateUid,jdbcType=INTEGER},
      UPDATE_TIME = #{updateTime,jdbcType=VARCHAR},
      AREA_ID = #{areaId,jdbcType=INTEGER},
      DDHAOFANG_FLAG = #{ddhaofangFlag,jdbcType=TINYINT},
      DEPT_CNAME = #{deptCname,jdbcType=VARCHAR},
      BUY_ACCOUNT_NUM = #{buyAccountNum,jdbcType=INTEGER},
      IS_HEADQUARTERS = #{isHeadquarters,jdbcType=TINYINT},
      IS_UNPAID_DEPT = #{isUnpaidDept,jdbcType=TINYINT},
      STATISTICS_FLAG = #{statisticsFlag,jdbcType=TINYINT},
      HIDDEN_ORGANIZATION = #{hiddenOrganization,jdbcType=TINYINT},
      SUPPORT_PROPERTY_FLAG = #{supportPropertyFlag,jdbcType=TINYINT},
      PARTNER_ID = #{partnerId,jdbcType=INTEGER}
    where DEPT_ID = #{deptId,jdbcType=INTEGER}
  </update>
  <resultMap extends="BaseResultMap" id="ErpFunDeptsDtoMap" type="com.myfun.repository.erpdb.dto.ErpFunDeptsDto">

  </resultMap>
  <resultMap extends="BaseResultMap" id="extResultMap" type="com.myfun.repository.erpdb.dto.ErpFunDeptsDto">
    <result column="agentNum" jdbcType="TINYINT" property="agentNum" />
  </resultMap>
  
	<select id="getRoamCount" resultType="java.lang.Integer">
		select sum(ROAM_NUM) from FUN_DEPTS
		where COMP_ID = #{compId} and DEPT_FLAG in (1, 2)
	</select>
	
  <!-- business -->
  <select id="getDeptByCompNoAndDeptNo" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from FUN_DEPTS
    where COMP_NO = #{shardCompNo,jdbcType=VARCHAR} 
    and DEPT_NO = #{deptNo,jdbcType=VARCHAR}
  </select>
  <select id="getValidDeptListByNotNull" parameterType="com.myfun.repository.erpdb.po.ErpFunDepts" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from FUN_DEPTS
    <where>
      <if test="compId != null">
        AND COMP_ID = #{compId,jdbcType=INTEGER}
      </if>
      <if test="regId != null">
        AND REG_ID = #{regId,jdbcType=INTEGER}
      </if>
      <if test="compNo != null and compNo != ''">
        AND COMP_NO = #{compNo,jdbcType=VARCHAR}
      </if>
      <if test="deptNo != null and deptNo != ''">
        AND DEPT_NO = #{deptNo,jdbcType=VARCHAR}
      </if>
      <if test="regionId != null">
        AND REGION_ID = #{regionId,jdbcType=INTEGER}
      </if>
      <if test="seqNo != null">
        AND SEQ_NO = #{seqNo,jdbcType=INTEGER}
      </if>
      <if test="deptName != null and eptName != ''">
        AND DEPT_NAME = #{deptName,jdbcType=VARCHAR}
      </if>
      <if test="deptCode != null and deptCode != ''">
        AND DEPT_CODE = #{deptCode,jdbcType=VARCHAR}
      </if>
      <if test="deptAddr != null and deptAddr != ''">
        AND DEPT_ADDR = #{deptAddr,jdbcType=VARCHAR}
      </if>
      <if test="deptTele != null and deptTele != ''">
        AND DEPT_TELE = #{deptTele,jdbcType=VARCHAR}
      </if>
      <if test="deptContact != null and deptContact != ''">
        AND DEPT_CONTACT = #{deptContact,jdbcType=VARCHAR}
      </if>
      <if test="deptDesc != null and deptDesc != ''">
        AND DEPT_DESC = #{deptDesc,jdbcType=VARCHAR}
      </if>
      <if test="roamNum != null">
        AND ROAM_NUM = #{roamNum,jdbcType=TINYINT}
      </if>
      <if test="userNum != null">
        AND USER_NUM = #{userNum,jdbcType=INTEGER}
      </if>
      <if test="deptType != null">
        AND DEPT_TYPE = #{deptType,jdbcType=TINYINT}
      </if>
      <if test="custLevel != null">
        AND CUST_LEVEL = #{custLevel,jdbcType=TINYINT}
      </if>
      <if test="updateUid != null">
        AND UPDATE_UID = #{updateUid,jdbcType=INTEGER}
      </if>
      <if test="updateTime != null and updateTime != ''">
        AND UPDATE_TIME = #{updateTime,jdbcType=VARCHAR}
      </if>
      <if test="areaId != null">
        AND AREA_ID = #{areaId,jdbcType=INTEGER}
      </if>
      <if test="ddhaofangFlag != null">
        AND DDHAOFANG_FLAG = #{ddhaofangFlag,jdbcType=TINYINT}
      </if>
      <if test="1 == 1">
      	AND DEPT_FLAG &gt; '0'
      </if>
    </where>
  </select>
  
  <select id="count" resultType="java.lang.Integer">
  	select count(1) from FUN_DEPTS where  COMP_NO = #{compNo}
        AND DEPT_NO = #{deptNo}
  </select>
  
  <select id="queryDept" resultMap="BaseResultMap">
 	 SELECT FUN_DEPTS.DEPT_ID, FUN_DEPTS.DEPT_NAME ,FUN_DEPTS.COMP_NO, FUN_DEPTS.DEPT_NO
 	 FROM FUN_DEPTS,FUN_USERS 
		WHERE FUN_USERS.DEPT_ID = FUN_DEPTS.DEPT_ID 
	 AND FUN_USERS.ARCHIVE_ID = #{shardArchiveId} AND USER_WRITEOFF = 0
	 order by FUN_DEPTS.UPDATE_TIME desc
  </select>
  
  <update id="updateUserNumByCompNoAndDeptNo">
  	update FUN_DEPTS set USER_NUM = #{userNum} where COMP_NO = #{shardCompNo} and DEPT_NO = #{deptNo}
  </update>
  
  <update id="updateRecordsByCompId">
  	UPDATE FUN_DEPTS SET DEPT_TYPE = #{softType}, UPDATE_TIME = #{nowTime}, ROAM_NUM = #{enterUserNum}, USER_NUM = #{userNum}
  	where COMP_ID = #{enterCompId}
  </update>
  <update id="updateByCompNoAndDeptNo" parameterType="com.myfun.repository.erpdb.po.ErpFunDepts">
    update FUN_DEPTS
    <set>
      <if test="compId != null">
        COMP_ID = #{compId,jdbcType=INTEGER},
      </if>
      <if test="regId != null">
        REG_ID = #{regId,jdbcType=INTEGER},
      </if>
      <if test="regionId != null">
        REGION_ID = #{regionId,jdbcType=INTEGER},
      </if>
      <if test="seqNo != null">
        SEQ_NO = #{seqNo,jdbcType=INTEGER},
      </if>
      <if test="deptName != null">
        DEPT_NAME = #{deptName,jdbcType=VARCHAR},
      </if>
      <if test="deptCode != null">
        DEPT_CODE = #{deptCode,jdbcType=VARCHAR},
      </if>
      <if test="deptAddr != null">
        DEPT_ADDR = #{deptAddr,jdbcType=VARCHAR},
      </if>
      <if test="deptTele != null">
        DEPT_TELE = #{deptTele,jdbcType=VARCHAR},
      </if>
      <if test="deptContact != null">
        DEPT_CONTACT = #{deptContact,jdbcType=VARCHAR},
      </if>
      <if test="deptDesc != null">
        DEPT_DESC = #{deptDesc,jdbcType=VARCHAR},
      </if>
      <if test="deptFlag != null">
        DEPT_FLAG = #{deptFlag,jdbcType=INTEGER},
      </if>
      <if test="roamNum != null">
        ROAM_NUM = #{roamNum,jdbcType=TINYINT},
      </if>
      <if test="userNum != null">
        USER_NUM = #{userNum,jdbcType=INTEGER},
      </if>
      <if test="deptType != null">
        DEPT_TYPE = #{deptType,jdbcType=TINYINT},
      </if>
      <if test="custLevel != null">
        CUST_LEVEL = #{custLevel,jdbcType=TINYINT},
      </if>
      <if test="updateUid != null">
        UPDATE_UID = #{updateUid,jdbcType=INTEGER},
      </if>
      <if test="updateTime != null">
        UPDATE_TIME = #{updateTime,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null">
        AREA_ID = #{areaId,jdbcType=INTEGER},
      </if>
      <if test="ddhaofangFlag != null">
        DDHAOFANG_FLAG = #{ddhaofangFlag,jdbcType=TINYINT},
      </if>
    </set>
    where COMP_NO = #{compNo,jdbcType=VARCHAR}
      and DEPT_NO = #{deptNo,jdbcType=VARCHAR}
  </update>
  <select id="getFunDeptsList" resultMap="extResultMap">
  		select d.COMP_ID,d.DEPT_ID,d.DEPT_NAME,d.DEPT_ADDR,d.DEPT_TELE,d.DEPT_CONTACT,(select count(1) from FUN_USERS u where u.COMP_ID = d.COMP_ID and u.DEPT_ID = d.DEPT_ID and u.USER_WRITEOFF = 0) as agentNum
  		from FUN_DEPTS d
  		where d.REG_ID = #{regId}
  		and d.DEPT_FLAG&gt;=1
  </select>
  <select id="getDeptListByRange" parameterType="com.myfun.repository.erpdb.po.ErpFunDepts" resultMap="BaseResultMap">
	  	select  <include refid="Base_Column_List" />
		from FUN_DEPTS 
		where IS_HEADQUARTERS !=1 AND COMP_ID = #{record.compId,jdbcType=INTEGER}
		<if test="record.regId != null">
        	and REG_ID = #{record.regId,jdbcType=INTEGER}
     	</if>
		<if test="record.areaId != null">
        	and AREA_ID = #{record.areaId,jdbcType=INTEGER}
     	</if>
     	<![CDATA[and DEPT_FLAG >= 1]]>
  </select>
  <select id="getAllDeptListByRange" parameterType="com.myfun.repository.erpdb.po.ErpFunDepts" resultMap="BaseResultMap">
	  	select  <include refid="Base_Column_List" />
		from FUN_DEPTS 
		where COMP_ID = #{record.compId,jdbcType=INTEGER}
		<if test="record.regId != null">
        	and REG_ID = #{record.regId,jdbcType=INTEGER}
     	</if>
		<if test="record.areaId != null">
        	and AREA_ID = #{record.areaId,jdbcType=INTEGER}
     	</if>
  </select>
  <select id="getByDeptId" resultMap="BaseResultMap">
  	select <include refid="Base_Column_List" />
	from FUN_DEPTS 
	where DEPT_ID = #{deptId}
  </select>
  
  <update id="updateErpFunDepts">
  	update FUN_DEPTS
    <set>
      <if test="record.compId != null">
        COMP_ID = #{record.compId,jdbcType=INTEGER},
      </if>
      <if test="record.regId != null">
        REG_ID = #{record.regId,jdbcType=INTEGER},
      </if>
      <if test="record.compNo != null">
        COMP_NO = #{record.compNo,jdbcType=VARCHAR},
      </if>
      <if test="record.deptNo != null">
        DEPT_NO = #{record.deptNo,jdbcType=VARCHAR},
      </if>
      <if test="record.regionId != null">
        REGION_ID = #{record.regionId,jdbcType=INTEGER},
      </if>
      <if test="record.seqNo != null">
        SEQ_NO = #{record.seqNo,jdbcType=INTEGER},
      </if>
      <if test="record.deptName != null">
        DEPT_NAME = #{record.deptName,jdbcType=VARCHAR},
      </if>
      <if test="record.deptCode != null">
        DEPT_CODE = #{record.deptCode,jdbcType=VARCHAR},
      </if>
      <if test="record.deptAddr != null">
        DEPT_ADDR = #{record.deptAddr,jdbcType=VARCHAR},
      </if>
      <if test="record.deptTele != null">
        DEPT_TELE = #{record.deptTele,jdbcType=VARCHAR},
      </if>
      <if test="record.deptContact != null">
        DEPT_CONTACT = #{record.deptContact,jdbcType=VARCHAR},
      </if>
      <if test="record.deptDesc != null">
        DEPT_DESC = #{record.deptDesc,jdbcType=VARCHAR},
      </if>
      <if test="record.deptFlag != null">
        DEPT_FLAG = #{record.deptFlag,jdbcType=INTEGER},
      </if>
      <if test="record.roamNum != null">
        ROAM_NUM = #{record.roamNum,jdbcType=TINYINT},
      </if>
      <if test="record.userNum != null">
        USER_NUM = #{record.userNum,jdbcType=INTEGER},
      </if>
      <if test="record.deptType != null">
        DEPT_TYPE = #{record.deptType,jdbcType=TINYINT},
      </if>
      <if test="record.custLevel != null">
        CUST_LEVEL = #{record.custLevel,jdbcType=TINYINT},
      </if>
      <if test="record.updateUid != null">
        UPDATE_UID = #{record.updateUid,jdbcType=INTEGER},
      </if>
      <if test="record.updateTime != null">
        UPDATE_TIME = #{record.updateTime,jdbcType=VARCHAR},
      </if>
      <if test="record.areaId != null">
        AREA_ID = #{record.areaId,jdbcType=INTEGER},
      </if>
      <if test="record.ddhaofangFlag != null">
        DDHAOFANG_FLAG = #{record.ddhaofangFlag,jdbcType=TINYINT},
      </if>
    </set>
    where DEPT_ID = #{record.deptId,jdbcType=INTEGER}
  </update>
  
  <select id="getDeptListByCompId" resultMap="BaseResultMap">
  	select <include refid="Base_Column_List" /> 
  	from FUN_DEPTS
  	<where>
        IS_HEADQUARTERS != 1
  		AND  COMP_ID = #{compId}
  		<![CDATA[and DEPT_FLAG >= 1]]>
  		<if test="null != regId">
  			and REG_ID = #{regId}
  		</if>
  		<if test="null != areaId">
  			and AREA_ID = #{areaId}
  		</if>
      and IS_UNPAID_DEPT != 1
  	</where>
  	order by SEQ_NO DESC
  </select>
  <select id="getDeptListByDeptIds" resultMap="BaseResultMap">
  	select <include refid="Base_Column_List" /> 
  	from FUN_DEPTS
  	where  DEPT_ID IN
  	<foreach close=")" collection="deptIds" item="deptId" open="(" separator=",">
  	 #{deptId}
  	</foreach>
  </select>
  <select id="getDeptListByDeptNos" resultMap="BaseResultMap">
  	select <include refid="Base_Column_List" /> 
  	from FUN_DEPTS
  	where COMP_ID = #{compId} AND DEPT_NO IN
  	<foreach close=")" collection="deptNos" item="deptNo" open="(" separator=",">
  	 #{deptNo}
  	</foreach>
  </select>
	<select id="getCacheableDeptMapByCompId" resultType="java.util.Map">
		select
		<include refid="Base_Column_List" />
		from FUN_DEPTS
		WHERE COMP_ID = #{compId}
		<![CDATA[and DEPT_FLAG >= 1]]>
        and IS_UNPAID_DEPT != 1
		order by SEQ_NO DESC
	</select>
	
	<select id="getDeptList" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from FUN_DEPTS
		WHERE COMP_ID = #{compId} and DEPT_FLAG &gt;= 1
        and IS_UNPAID_DEPT != 1
		and ${serchRange} = #{serchRangeId}
		<if test="partnerIds != null and partnerIds.size > 0">
          and PARTNER_ID IN
          <foreach close=")" collection="partnerIds" item="id" open="(" separator=",">
            #{id}
          </foreach>
        </if>
	</select>

	<select id="selectFunDeptsList" resultMap="BaseResultMap">
		SELECT <include refid="Base_Column_List" />
		FROM FUN_DEPTS
		WHERE COMP_ID = #{compId} and DEPT_FLAG &gt;= 1 and IS_UNPAID_DEPT != 1 and
		<choose>
			<when test="manageRangeRangeType == 1">COMP_ID </when>
			<when test="manageRangeRangeType == 2">AREA_ID </when>
			<when test="manageRangeRangeType == 3">REG_ID </when>
			<when test="manageRangeRangeType == 4">DEPT_ID </when>
		</choose>
		IN
		<foreach close=")" collection="userManageRangeIds" item="userManageRangeId" open="(" separator=",">
			#{userManageRangeId}
		</foreach>
	</select>
	<select id="selectFunDeptsListRank" resultMap="BaseResultMap">
		SELECT <include refid="Base_Column_List" />
		FROM FUN_DEPTS
		WHERE COMP_ID = #{compId} and DEPT_FLAG &gt;= 1  and IS_UNPAID_DEPT != 1
		<if test="null != regId">
  			and REG_ID = #{regId}
  		</if>
  		<if test="null != areaId">
  			and AREA_ID = #{areaId}
  		</if>
	</select>

  <select id="getCacheableDeptListByCompId" resultMap="BaseResultMap">
    select
      <include refid="Base_Column_List" />
    from
    FUN_DEPTS
    where COMP_ID=#{compId} AND DEPT_FLAG &gt;= 1 and IS_UNPAID_DEPT != 1 order BY SEQ_NO DESC
  </select>

  <update id="updateDeptforArea">
    update FUN_DEPTS
    set AREA_ID=#{areaId},UPDATE_TIME = GETDATE()
    where COMP_ID=#{compId} AND REG_ID = #{regId}
  </update>

  <select id="getDataList" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from FUN_DEPTS
    WHERE COMP_ID = #{compId} and REG_ID = #{regId} AND DEPT_FLAG IN ('1', '2') and IS_UNPAID_DEPT != 1
  </select>

  <select id="getValidCount" resultType="java.lang.Integer">
    select COUNT (*)
    from FUN_DEPTS
    WHERE COMP_ID = #{compId} and DEPT_FLAG &gt;= 1
  </select>

  <select id="getDeptByCompNoAndDeptId" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from FUN_DEPTS
    where DEPT_ID = #{deptId}
  </select>

	<select id="getDeptByCompIdAndDeptId" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from FUN_DEPTS
		where DEPT_ID = #{deptId} AND COMP_ID = #{compId}
	</select>
	
	<select id="getDeptDtoListByCompId" resultMap="ErpFunDeptsDtoMap">
		select
		<include refid="Base_Column_List" />
		from FUN_DEPTS
		<where>
			COMP_ID = #{compId}
			<![CDATA[and DEPT_FLAG >= 1]]>
			<if test="null != regId">
				and REG_ID = #{regId}
			</if>
			<if test="null != areaId">
				and AREA_ID = #{areaId}
			</if>
			<if test="null != isHeadquarters">
				and IS_HEADQUARTERS = #{isHeadquarters}
			</if>
            <if test="null != partnerId">
              and PARTNER_ID = #{partnerId}
            </if>
			AND HIDDEN_ORGANIZATION = 0
		</where>
		order by SEQ_NO DESC
	</select>

	
	<update id="updateByDeptInfoChange">
		UPDATE FUN_USERS SET AREA_ID=#{areaId}, REG_ID=#{regId},UPDATE_TIME = GETDATE() WHERE COMP_ID=#{compId} AND DEPT_ID = #{deptId};
		UPDATE FUN_DEAL SET AREA_ID=#{areaId}, REG_ID=#{regId} WHERE COMP_ID=#{compId} AND DEPT_ID = #{deptId};
		UPDATE FUN_SALE SET AREA_ID=#{areaId}, REG_ID=#{regId} WHERE COMP_ID=#{compId} AND DEPT_ID = #{deptId};
		UPDATE FUN_LEASE SET AREA_ID=#{areaId}, REG_ID=#{regId} WHERE COMP_ID=#{compId} AND DEPT_ID = #{deptId};
		UPDATE FUN_RENT_CUSTOMER SET AREA_ID=#{areaId}, REG_ID=#{regId} WHERE COMP_ID=#{compId} AND DEPT_ID = #{deptId};
		UPDATE FUN_BUY_CUSTOMER SET AREA_ID=#{areaId}, REG_ID=#{regId} WHERE COMP_ID=#{compId} AND DEPT_ID = #{deptId};
		update FUN_USERS_INVITED set AREA_ID=#{areaId}, REG_ID=#{regId} WHERE COMP_ID=#{compId} AND DEPT_ID = #{deptId};	
	</update>
	
	<select id="getAreaRegByDeptId" resultMap="BaseResultMap">
		select B.REG_ID as REG_ID,B.AREA_ID as AREA_ID
		from fun_depts A join fun_region B on A.REG_ID = B.REG_ID
		where A.DEPT_ID = #{deptId}
	</select>

  <select id="getDeptListBynamicId" resultMap="BaseResultMap">
    select <include refid="Base_Column_List" /> from fun_depts
    where comp_id=#{compId} and ${columnName} = #{columnValue}
  </select>

	<select id="getDeptAndPositionList" resultType="com.myfun.erpWeb.openApi.analysis.vo.RegHouseCountDto">
		SELECT A.DEPT_ID deptId, A.DEPT_NO deptNo, A.DEPT_NAME deptName, A.REGION_ID regId,
		B.REG_NAME regName,B.POSITION_X regPositionX,B.POSITION_Y regPositionY
		from FUN_DEPTS A  
		JOIN hft_admindb.dbo.FUN_REG B ON A.REGION_ID=B.REG_ID
		WHERE A.COMP_ID=#{compId} AND A.DEPT_FLAG &gt;=1
	</select>
	
	<select id="getStopDeptList" resultMap="BaseResultMap">
	  select A.DEPT_ID, A.COMP_ID, A.REG_ID, A.COMP_NO, A.DEPT_NO, A.REGION_ID, A.SEQ_NO, A.DEPT_NAME, A.DEPT_CODE,
      A.DEPT_ADDR, A.DEPT_TELE, A.DEPT_CONTACT, A.DEPT_DESC, A.DEPT_FLAG, A.ROAM_NUM, A.USER_NUM, A.DEPT_TYPE,
      A.CUST_LEVEL, A.UPDATE_UID, A.UPDATE_TIME, A.AREA_ID, A.DDHAOFANG_FLAG, A.DEPT_CNAME, A.BUY_ACCOUNT_NUM,
      A.IS_HEADQUARTERS, A.IS_UNPAID_DEPT 
      from FUN_DEPTS A 
      JOIN hft_admindb.dbo.FUN_DEPTS B ON A.COMP_NO = B.COMP_NO AND A.DEPT_NO = B.DEPT_NO
		WHERE A.COMP_ID=#{compId} AND B.COMP_NO=#{compNo}
		AND B.DEPT_NO IN
		<foreach close=")" collection="deptNos" item="item" open="(" separator=",">
			#{item}
		</foreach>
		AND B.TRY_END &lt; GETDATE()
	</select>
	
  <select id="getDeptsDtoListByCompId" resultType="com.myfun.repository.erpdb.dto.ErpFunDeptsDto">
     SELECT u.count AS countUser,d.dept_id as deptId,d.area_id as areaId,d.reg_id as regId FROM fun_depts d JOIN
    (SELECT isnull(count(1), 0) count, dept_id from fun_users  where comp_id = #{compId} and user_writeoff=0 group by dept_id) u
     on d.dept_id = u.dept_id where d.IS_HEADQUARTERS =1
  </select>
  <select id="selectNameByPrimaryKey" parameterType="com.myfun.repository.erpdb.po.ErpFunDepts" resultType="java.lang.String">
    SELECT DEPT_NAME FROM FUN_DEPTS WHERE DEPT_ID = #{deptId}
  </select>
  <select id="selectByPartnerIds" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from FUN_DEPTS
    where COMP_ID=#{compId} AND PARTNER_ID  in
    <foreach close=")" collection="partnerIds" item="item" open="(" separator=",">
      #{item}
    </foreach>
    <![CDATA[and DEPT_FLAG >= 1]]>
    AND HIDDEN_ORGANIZATION = 0
  </select>
  
  <select id="getDeptDtoListByPartnerId" resultMap="ErpFunDeptsDtoMap">
		select
		<include refid="Base_Column_List" />
		from FUN_DEPTS
		<where>
			COMP_ID = #{compId}
			<![CDATA[and DEPT_FLAG >= 1]]>
			and PARTNER_ID = #{partnerId}
			AND HIDDEN_ORGANIZATION = 0
		</where>
		order by SEQ_NO DESC
	</select>
  <select id="getDeptByDeptNo" resultMap="BaseResultMap">
		select
		    <include refid="Base_Column_List"/>
		from FUN_DEPTS
		<where>
			COMP_ID = #{compId} and DEPT_NO =#{deptNo}
		</where>
	</select>
	
	<insert id="createNewDept" parameterType="com.myfun.repository.erpdb.po.ErpFunDepts">
    insert into FUN_DEPTS
    <trim prefix="(" suffix=")" suffixOverrides=",">
      DEPT_ID,
      <if test="compId != null">
        COMP_ID,
      </if>
      <if test="regId != null">
        REG_ID,
      </if>
      <if test="compNo != null">
        COMP_NO,
      </if>
      <if test="deptNo != null">
        DEPT_NO,
      </if>
      <if test="regionId != null">
        REGION_ID,
      </if>
      <if test="seqNo != null">
        SEQ_NO,
      </if>
      <if test="deptName != null">
        DEPT_NAME,
      </if>
      <if test="deptCode != null">
        DEPT_CODE,
      </if>
      <if test="deptAddr != null">
        DEPT_ADDR,
      </if>
      <if test="deptTele != null">
        DEPT_TELE,
      </if>
      <if test="deptContact != null">
        DEPT_CONTACT,
      </if>
      <if test="deptDesc != null">
        DEPT_DESC,
      </if>
      <if test="deptFlag != null">
        DEPT_FLAG,
      </if>
      <if test="roamNum != null">
        ROAM_NUM,
      </if>
      <if test="userNum != null">
        USER_NUM,
      </if>
      <if test="deptType != null">
        DEPT_TYPE,
      </if>
      <if test="custLevel != null">
        CUST_LEVEL,
      </if>
      <if test="updateUid != null">
        UPDATE_UID,
      </if>
      <if test="updateTime != null">
        UPDATE_TIME,
      </if>
      <if test="areaId != null">
        AREA_ID,
      </if>
      <if test="ddhaofangFlag != null">
        DDHAOFANG_FLAG,
      </if>
      <if test="deptCname != null">
        DEPT_CNAME,
      </if>
      <if test="buyAccountNum != null">
        BUY_ACCOUNT_NUM,
      </if>
      <if test="isHeadquarters != null">
        IS_HEADQUARTERS,
      </if>
      <if test="isUnpaidDept != null">
        IS_UNPAID_DEPT,
      </if>
      <if test="statisticsFlag != null">
        STATISTICS_FLAG,
      </if>
      <if test="hiddenOrganization != null">
        HIDDEN_ORGANIZATION,
      </if>
      <if test="supportPropertyFlag != null">
        SUPPORT_PROPERTY_FLAG,
      </if>
      <if test="partnerId != null">
        PARTNER_ID,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      #{deptId,jdbcType=INTEGER},
      <if test="compId != null">
        #{compId,jdbcType=INTEGER},
      </if>
      <if test="regId != null">
        #{regId,jdbcType=INTEGER},
      </if>
      <if test="compNo != null">
        #{compNo,jdbcType=VARCHAR},
      </if>
      <if test="deptNo != null">
        #{deptNo,jdbcType=VARCHAR},
      </if>
      <if test="regionId != null">
        #{regionId,jdbcType=INTEGER},
      </if>
      <if test="seqNo != null">
        #{seqNo,jdbcType=INTEGER},
      </if>
      <if test="deptName != null">
        #{deptName,jdbcType=VARCHAR},
      </if>
      <if test="deptCode != null">
        #{deptCode,jdbcType=VARCHAR},
      </if>
      <if test="deptAddr != null">
        #{deptAddr,jdbcType=VARCHAR},
      </if>
      <if test="deptTele != null">
        #{deptTele,jdbcType=VARCHAR},
      </if>
      <if test="deptContact != null">
        #{deptContact,jdbcType=VARCHAR},
      </if>
      <if test="deptDesc != null">
        #{deptDesc,jdbcType=VARCHAR},
      </if>
      <if test="deptFlag != null">
        #{deptFlag,jdbcType=INTEGER},
      </if>
      <if test="roamNum != null">
        #{roamNum,jdbcType=TINYINT},
      </if>
      <if test="userNum != null">
        #{userNum,jdbcType=INTEGER},
      </if>
      <if test="deptType != null">
        #{deptType,jdbcType=TINYINT},
      </if>
      <if test="custLevel != null">
        #{custLevel,jdbcType=TINYINT},
      </if>
      <if test="updateUid != null">
        #{updateUid,jdbcType=INTEGER},
      </if>
      <if test="updateTime != null">
        #{updateTime,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null">
        #{areaId,jdbcType=INTEGER},
      </if>
      <if test="ddhaofangFlag != null">
        #{ddhaofangFlag,jdbcType=TINYINT},
      </if>
      <if test="deptCname != null">
        #{deptCname,jdbcType=VARCHAR},
      </if>
      <if test="buyAccountNum != null">
        #{buyAccountNum,jdbcType=INTEGER},
      </if>
      <if test="isHeadquarters != null">
        #{isHeadquarters,jdbcType=TINYINT},
      </if>
      <if test="isUnpaidDept != null">
        #{isUnpaidDept,jdbcType=TINYINT},
      </if>
      <if test="statisticsFlag != null">
        #{statisticsFlag,jdbcType=TINYINT},
      </if>
      <if test="hiddenOrganization != null">
        #{hiddenOrganization,jdbcType=TINYINT},
      </if>
      <if test="supportPropertyFlag != null">
        #{supportPropertyFlag,jdbcType=TINYINT},
      </if>
      <if test="partnerId != null">
        #{partnerId,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>

  <insert id="insertSelectiveNew" parameterType="com.myfun.repository.erpdb.po.ErpFunDepts">
    insert into FUN_DEPTS
    <trim prefix="(" suffix=")" suffixOverrides=",">
      DEPT_ID,
      <if test="compId != null">
        COMP_ID,
      </if>
      <if test="regId != null">
        REG_ID,
      </if>
      <if test="compNo != null">
        COMP_NO,
      </if>
      <if test="deptNo != null">
        DEPT_NO,
      </if>
      <if test="regionId != null">
        REGION_ID,
      </if>
      <if test="seqNo != null">
        SEQ_NO,
      </if>
      <if test="deptName != null">
        DEPT_NAME,
      </if>
      <if test="deptCode != null">
        DEPT_CODE,
      </if>
      <if test="deptAddr != null">
        DEPT_ADDR,
      </if>
      <if test="deptTele != null">
        DEPT_TELE,
      </if>
      <if test="deptContact != null">
        DEPT_CONTACT,
      </if>
      <if test="deptDesc != null">
        DEPT_DESC,
      </if>
      <if test="deptFlag != null">
        DEPT_FLAG,
      </if>
      <if test="roamNum != null">
        ROAM_NUM,
      </if>
      <if test="userNum != null">
        USER_NUM,
      </if>
      <if test="deptType != null">
        DEPT_TYPE,
      </if>
      <if test="custLevel != null">
        CUST_LEVEL,
      </if>
      <if test="updateUid != null">
        UPDATE_UID,
      </if>
      <if test="updateTime != null">
        UPDATE_TIME,
      </if>
      <if test="areaId != null">
        AREA_ID,
      </if>
      <if test="ddhaofangFlag != null">
        DDHAOFANG_FLAG,
      </if>
      <if test="deptCname != null">
        DEPT_CNAME,
      </if>
      <if test="buyAccountNum != null">
        BUY_ACCOUNT_NUM,
      </if>
      <if test="isHeadquarters != null">
        IS_HEADQUARTERS,
      </if>
      <if test="isUnpaidDept != null">
        IS_UNPAID_DEPT,
      </if>
      <if test="statisticsFlag != null">
        STATISTICS_FLAG,
      </if>
      <if test="hiddenOrganization != null">
        HIDDEN_ORGANIZATION,
      </if>
      <if test="supportPropertyFlag != null">
        SUPPORT_PROPERTY_FLAG,
      </if>
      <if test="partnerId != null">
        PARTNER_ID,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      #{deptId,jdbcType=INTEGER},
      <if test="compId != null">
        #{compId,jdbcType=INTEGER},
      </if>
      <if test="regId != null">
        #{regId,jdbcType=INTEGER},
      </if>
      <if test="compNo != null">
        #{compNo,jdbcType=VARCHAR},
      </if>
      <if test="deptNo != null">
        #{deptNo,jdbcType=VARCHAR},
      </if>
      <if test="regionId != null">
        #{regionId,jdbcType=INTEGER},
      </if>
      <if test="seqNo != null">
        #{seqNo,jdbcType=INTEGER},
      </if>
      <if test="deptName != null">
        #{deptName,jdbcType=VARCHAR},
      </if>
      <if test="deptCode != null">
        #{deptCode,jdbcType=VARCHAR},
      </if>
      <if test="deptAddr != null">
        #{deptAddr,jdbcType=VARCHAR},
      </if>
      <if test="deptTele != null">
        #{deptTele,jdbcType=VARCHAR},
      </if>
      <if test="deptContact != null">
        #{deptContact,jdbcType=VARCHAR},
      </if>
      <if test="deptDesc != null">
        #{deptDesc,jdbcType=VARCHAR},
      </if>
      <if test="deptFlag != null">
        #{deptFlag,jdbcType=INTEGER},
      </if>
      <if test="roamNum != null">
        #{roamNum,jdbcType=TINYINT},
      </if>
      <if test="userNum != null">
        #{userNum,jdbcType=INTEGER},
      </if>
      <if test="deptType != null">
        #{deptType,jdbcType=TINYINT},
      </if>
      <if test="custLevel != null">
        #{custLevel,jdbcType=TINYINT},
      </if>
      <if test="updateUid != null">
        #{updateUid,jdbcType=INTEGER},
      </if>
      <if test="updateTime != null">
        #{updateTime,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null">
        #{areaId,jdbcType=INTEGER},
      </if>
      <if test="ddhaofangFlag != null">
        #{ddhaofangFlag,jdbcType=TINYINT},
      </if>
      <if test="deptCname != null">
        #{deptCname,jdbcType=VARCHAR},
      </if>
      <if test="buyAccountNum != null">
        #{buyAccountNum,jdbcType=INTEGER},
      </if>
      <if test="isHeadquarters != null">
        #{isHeadquarters,jdbcType=TINYINT},
      </if>
      <if test="isUnpaidDept != null">
        #{isUnpaidDept,jdbcType=TINYINT},
      </if>
      <if test="statisticsFlag != null">
        #{statisticsFlag,jdbcType=TINYINT},
      </if>
      <if test="hiddenOrganization != null">
        #{hiddenOrganization,jdbcType=TINYINT},
      </if>
      <if test="supportPropertyFlag != null">
        #{supportPropertyFlag,jdbcType=TINYINT},
      </if>
      <if test="partnerId != null">
        #{partnerId,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
</mapper>