<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myfun.repository.erpdb.dao.ErpProcessFinancMapper">
  <resultMap id="BaseResultMap" type="com.myfun.repository.erpdb.po.ErpProcessFinanc">
    <!--@mbggenerated-->
    <id column="PF_ID" jdbcType="INTEGER" property="pfId" />
    <result column="COMP_ID" jdbcType="INTEGER" property="compId" />
    <result column="DEAL_ID" jdbcType="INTEGER" property="dealId" />
    <result column="PF_NAME" jdbcType="VARCHAR" property="pfName" />
    <result column="PF_ACTUAL" jdbcType="TINYINT" property="pfActual" />
    <result column="PF_GETER" jdbcType="VARCHAR" property="pfGeter" />
    <result column="PF_PAYER" jdbcType="VARCHAR" property="pfPayer" />
    <result column="PAY_AMOUNT" jdbcType="DECIMAL" property="payAmount" />
    <result column="PF_DESC" jdbcType="VARCHAR" property="pfDesc" />
    <result column="PF_TIME" jdbcType="TIMESTAMP" property="pfTime" />
    <result column="PAYMENT_ID" jdbcType="INTEGER" property="paymentId" />
    <result column="AUDIT_STATUS" jdbcType="VARCHAR" property="auditStatus" />
    <result column="DUE_DATE" jdbcType="TIMESTAMP" property="dueDate" />
    <result column="AUDIT_TIME" jdbcType="TIMESTAMP" property="auditTime" />
    <result column="AUDIT_USER" jdbcType="VARCHAR" property="auditUser" />
    <result column="AUDIT_USER_NAME" jdbcType="VARCHAR" property="auditUserName" />
    <result column="ACTUAL_RECEIPT_NUM" jdbcType="VARCHAR" property="actualReceiptNum" />
    <result column="IS_PROFIT" jdbcType="TINYINT" property="isProfit" />
    <result column="PERFORMANCE_TYPE" jdbcType="TINYINT" property="performanceType" />
    <result column="DISCOUNT" jdbcType="NUMERIC" property="discount" />
    <result column="PAYMENT_TYPE" jdbcType="INTEGER" property="paymentType" />
    <result column="PAY_ACCOUNT" jdbcType="VARCHAR" property="payAccount" />
    <result column="ORDER_NO" jdbcType="VARCHAR" property="orderNo" />
    <result column="PAY_TYPE_DESC" jdbcType="VARCHAR" property="payTypeDesc" />
    <result column="RECEIPT_MONEY_USER" jdbcType="INTEGER" property="receiptMoneyUser" />
    <result column="RECEIPT_MONEY_DEPT" jdbcType="INTEGER" property="receiptMoneyDept" />
    <result column="IS_PRINT" jdbcType="TINYINT" property="isPrint" />
    <result column="BILL_CODE_ID" jdbcType="INTEGER" property="billCodeId" />
    <result column="BILL_CODE_NO" jdbcType="VARCHAR" property="billCodeNo" />
    <result column="BILL_PHOTO" jdbcType="VARCHAR" property="billPhoto" />
    <result column="BILL_WAY" jdbcType="TINYINT" property="billWay" />
    <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
    <result column="CREATE_UID" jdbcType="INTEGER" property="createUid" />
    <result column="ONLINE_PAYMENT_RECEIPT_FILE_ID" jdbcType="INTEGER" property="onlinePaymentReceiptFileId" />
    <result column="PAY_TYPE" jdbcType="INTEGER" property="payType" />
    <result column="ITEM_SOURCE" jdbcType="TINYINT" property="itemSource" />
    <result column="SOURCE_ID" jdbcType="INTEGER" property="sourceId" />
    <result column="SERIAL_NUMBER" jdbcType="VARCHAR" property="serialNumber" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--@mbggenerated-->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--@mbggenerated-->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--@mbggenerated-->
    PF_ID, COMP_ID, DEAL_ID, PF_NAME, PF_ACTUAL, PF_GETER, PF_PAYER, PAY_AMOUNT, PF_DESC, 
    PF_TIME, PAYMENT_ID, AUDIT_STATUS, DUE_DATE, AUDIT_TIME, AUDIT_USER, AUDIT_USER_NAME, 
    ACTUAL_RECEIPT_NUM, IS_PROFIT, PERFORMANCE_TYPE, DISCOUNT, PAYMENT_TYPE, PAY_ACCOUNT, 
    ORDER_NO, PAY_TYPE_DESC, RECEIPT_MONEY_USER, RECEIPT_MONEY_DEPT, IS_PRINT, BILL_CODE_ID, 
    BILL_CODE_NO, BILL_PHOTO, BILL_WAY, CREATE_TIME, CREATE_UID, ONLINE_PAYMENT_RECEIPT_FILE_ID, 
    PAY_TYPE, ITEM_SOURCE, SOURCE_ID, SERIAL_NUMBER
  </sql>
  <select id="selectByExample" parameterType="com.myfun.repository.erpdb.po.ErpProcessFinancExample" resultMap="BaseResultMap">
    <!--@mbggenerated-->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from PROCESS_FINANC
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--@mbggenerated-->
    select 
    <include refid="Base_Column_List" />
    from PROCESS_FINANC
    where PF_ID = #{pfId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--@mbggenerated-->
    delete from PROCESS_FINANC
    where PF_ID = #{pfId,jdbcType=INTEGER}
  </delete>
  <delete id="deleteByExample" parameterType="com.myfun.repository.erpdb.po.ErpProcessFinancExample">
    <!--@mbggenerated-->
    delete from PROCESS_FINANC
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.myfun.repository.erpdb.po.ErpProcessFinanc">
    <!--@mbggenerated-->
    <selectKey keyProperty="pfId" order="BEFORE" resultType="java.lang.Integer">
      SELECT next value for SEQ_PROCESS_FINANC_PF_ID
    </selectKey>
    insert into PROCESS_FINANC (PF_ID, COMP_ID, DEAL_ID, 
      PF_NAME, PF_ACTUAL, PF_GETER, 
      PF_PAYER, PAY_AMOUNT, PF_DESC, 
      PF_TIME, PAYMENT_ID, AUDIT_STATUS, 
      DUE_DATE, AUDIT_TIME, AUDIT_USER, 
      AUDIT_USER_NAME, ACTUAL_RECEIPT_NUM, IS_PROFIT, 
      PERFORMANCE_TYPE, DISCOUNT, PAYMENT_TYPE, 
      PAY_ACCOUNT, ORDER_NO, PAY_TYPE_DESC, 
      RECEIPT_MONEY_USER, RECEIPT_MONEY_DEPT, IS_PRINT, 
      BILL_CODE_ID, BILL_CODE_NO, BILL_PHOTO, 
      BILL_WAY, CREATE_TIME, CREATE_UID, 
      ONLINE_PAYMENT_RECEIPT_FILE_ID, PAY_TYPE, ITEM_SOURCE, 
      SOURCE_ID, SERIAL_NUMBER)
    values (#{pfId,jdbcType=INTEGER}, #{compId,jdbcType=INTEGER}, #{dealId,jdbcType=INTEGER}, 
      #{pfName,jdbcType=VARCHAR}, #{pfActual,jdbcType=TINYINT}, #{pfGeter,jdbcType=VARCHAR}, 
      #{pfPayer,jdbcType=VARCHAR}, #{payAmount,jdbcType=DECIMAL}, #{pfDesc,jdbcType=VARCHAR}, 
      #{pfTime,jdbcType=TIMESTAMP}, #{paymentId,jdbcType=INTEGER}, #{auditStatus,jdbcType=VARCHAR}, 
      #{dueDate,jdbcType=TIMESTAMP}, #{auditTime,jdbcType=TIMESTAMP}, #{auditUser,jdbcType=VARCHAR}, 
      #{auditUserName,jdbcType=VARCHAR}, #{actualReceiptNum,jdbcType=VARCHAR}, #{isProfit,jdbcType=TINYINT}, 
      #{performanceType,jdbcType=TINYINT}, #{discount,jdbcType=NUMERIC}, #{paymentType,jdbcType=INTEGER}, 
      #{payAccount,jdbcType=VARCHAR}, #{orderNo,jdbcType=VARCHAR}, #{payTypeDesc,jdbcType=VARCHAR}, 
      #{receiptMoneyUser,jdbcType=INTEGER}, #{receiptMoneyDept,jdbcType=INTEGER}, #{isPrint,jdbcType=TINYINT}, 
      #{billCodeId,jdbcType=INTEGER}, #{billCodeNo,jdbcType=VARCHAR}, #{billPhoto,jdbcType=VARCHAR}, 
      #{billWay,jdbcType=TINYINT}, #{createTime,jdbcType=TIMESTAMP}, #{createUid,jdbcType=INTEGER}, 
      #{onlinePaymentReceiptFileId,jdbcType=INTEGER}, #{payType,jdbcType=INTEGER}, #{itemSource,jdbcType=TINYINT}, 
      #{sourceId,jdbcType=INTEGER}, #{serialNumber,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.myfun.repository.erpdb.po.ErpProcessFinanc">
    <!--@mbggenerated-->
    <selectKey keyProperty="pfId" order="BEFORE" resultType="java.lang.Integer">
      SELECT next value for SEQ_PROCESS_FINANC_PF_ID
    </selectKey>
    insert into PROCESS_FINANC
    <trim prefix="(" suffix=")" suffixOverrides=",">
      PF_ID,
      <if test="compId != null">
        COMP_ID,
      </if>
      <if test="dealId != null">
        DEAL_ID,
      </if>
      <if test="pfName != null">
        PF_NAME,
      </if>
      <if test="pfActual != null">
        PF_ACTUAL,
      </if>
      <if test="pfGeter != null">
        PF_GETER,
      </if>
      <if test="pfPayer != null">
        PF_PAYER,
      </if>
      <if test="payAmount != null">
        PAY_AMOUNT,
      </if>
      <if test="pfDesc != null">
        PF_DESC,
      </if>
      <if test="pfTime != null">
        PF_TIME,
      </if>
      <if test="paymentId != null">
        PAYMENT_ID,
      </if>
      <if test="auditStatus != null">
        AUDIT_STATUS,
      </if>
      <if test="dueDate != null">
        DUE_DATE,
      </if>
      <if test="auditTime != null">
        AUDIT_TIME,
      </if>
      <if test="auditUser != null">
        AUDIT_USER,
      </if>
      <if test="auditUserName != null">
        AUDIT_USER_NAME,
      </if>
      <if test="actualReceiptNum != null">
        ACTUAL_RECEIPT_NUM,
      </if>
      <if test="isProfit != null">
        IS_PROFIT,
      </if>
      <if test="performanceType != null">
        PERFORMANCE_TYPE,
      </if>
      <if test="discount != null">
        DISCOUNT,
      </if>
      <if test="paymentType != null">
        PAYMENT_TYPE,
      </if>
      <if test="payAccount != null">
        PAY_ACCOUNT,
      </if>
      <if test="orderNo != null">
        ORDER_NO,
      </if>
      <if test="payTypeDesc != null">
        PAY_TYPE_DESC,
      </if>
      <if test="receiptMoneyUser != null">
        RECEIPT_MONEY_USER,
      </if>
      <if test="receiptMoneyDept != null">
        RECEIPT_MONEY_DEPT,
      </if>
      <if test="isPrint != null">
        IS_PRINT,
      </if>
      <if test="billCodeId != null">
        BILL_CODE_ID,
      </if>
      <if test="billCodeNo != null">
        BILL_CODE_NO,
      </if>
      <if test="billPhoto != null">
        BILL_PHOTO,
      </if>
      <if test="billWay != null">
        BILL_WAY,
      </if>
      <if test="createTime != null">
        CREATE_TIME,
      </if>
      <if test="createUid != null">
        CREATE_UID,
      </if>
      <if test="onlinePaymentReceiptFileId != null">
        ONLINE_PAYMENT_RECEIPT_FILE_ID,
      </if>
      <if test="payType != null">
        PAY_TYPE,
      </if>
      <if test="itemSource != null">
        ITEM_SOURCE,
      </if>
      <if test="sourceId != null">
        SOURCE_ID,
      </if>
      <if test="serialNumber != null">
        SERIAL_NUMBER,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      #{pfId,jdbcType=INTEGER},
      <if test="compId != null">
        #{compId,jdbcType=INTEGER},
      </if>
      <if test="dealId != null">
        #{dealId,jdbcType=INTEGER},
      </if>
      <if test="pfName != null">
        #{pfName,jdbcType=VARCHAR},
      </if>
      <if test="pfActual != null">
        #{pfActual,jdbcType=TINYINT},
      </if>
      <if test="pfGeter != null">
        #{pfGeter,jdbcType=VARCHAR},
      </if>
      <if test="pfPayer != null">
        #{pfPayer,jdbcType=VARCHAR},
      </if>
      <if test="payAmount != null">
        #{payAmount,jdbcType=DECIMAL},
      </if>
      <if test="pfDesc != null">
        #{pfDesc,jdbcType=VARCHAR},
      </if>
      <if test="pfTime != null">
        #{pfTime,jdbcType=TIMESTAMP},
      </if>
      <if test="paymentId != null">
        #{paymentId,jdbcType=INTEGER},
      </if>
      <if test="auditStatus != null">
        #{auditStatus,jdbcType=VARCHAR},
      </if>
      <if test="dueDate != null">
        #{dueDate,jdbcType=TIMESTAMP},
      </if>
      <if test="auditTime != null">
        #{auditTime,jdbcType=TIMESTAMP},
      </if>
      <if test="auditUser != null">
        #{auditUser,jdbcType=VARCHAR},
      </if>
      <if test="auditUserName != null">
        #{auditUserName,jdbcType=VARCHAR},
      </if>
      <if test="actualReceiptNum != null">
        #{actualReceiptNum,jdbcType=VARCHAR},
      </if>
      <if test="isProfit != null">
        #{isProfit,jdbcType=TINYINT},
      </if>
      <if test="performanceType != null">
        #{performanceType,jdbcType=TINYINT},
      </if>
      <if test="discount != null">
        #{discount,jdbcType=NUMERIC},
      </if>
      <if test="paymentType != null">
        #{paymentType,jdbcType=INTEGER},
      </if>
      <if test="payAccount != null">
        #{payAccount,jdbcType=VARCHAR},
      </if>
      <if test="orderNo != null">
        #{orderNo,jdbcType=VARCHAR},
      </if>
      <if test="payTypeDesc != null">
        #{payTypeDesc,jdbcType=VARCHAR},
      </if>
      <if test="receiptMoneyUser != null">
        #{receiptMoneyUser,jdbcType=INTEGER},
      </if>
      <if test="receiptMoneyDept != null">
        #{receiptMoneyDept,jdbcType=INTEGER},
      </if>
      <if test="isPrint != null">
        #{isPrint,jdbcType=TINYINT},
      </if>
      <if test="billCodeId != null">
        #{billCodeId,jdbcType=INTEGER},
      </if>
      <if test="billCodeNo != null">
        #{billCodeNo,jdbcType=VARCHAR},
      </if>
      <if test="billPhoto != null">
        #{billPhoto,jdbcType=VARCHAR},
      </if>
      <if test="billWay != null">
        #{billWay,jdbcType=TINYINT},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createUid != null">
        #{createUid,jdbcType=INTEGER},
      </if>
      <if test="onlinePaymentReceiptFileId != null">
        #{onlinePaymentReceiptFileId,jdbcType=INTEGER},
      </if>
      <if test="payType != null">
        #{payType,jdbcType=INTEGER},
      </if>
      <if test="itemSource != null">
        #{itemSource,jdbcType=TINYINT},
      </if>
      <if test="sourceId != null">
        #{sourceId,jdbcType=INTEGER},
      </if>
      <if test="serialNumber != null">
        #{serialNumber,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.myfun.repository.erpdb.po.ErpProcessFinancExample" resultType="java.lang.Integer">
    <!--@mbggenerated-->
    select count(*) from PROCESS_FINANC
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--@mbggenerated-->
    update PROCESS_FINANC
    <set>
      <if test="record.pfId != null">
        PF_ID = #{record.pfId,jdbcType=INTEGER},
      </if>
      <if test="record.compId != null">
        COMP_ID = #{record.compId,jdbcType=INTEGER},
      </if>
      <if test="record.dealId != null">
        DEAL_ID = #{record.dealId,jdbcType=INTEGER},
      </if>
      <if test="record.pfName != null">
        PF_NAME = #{record.pfName,jdbcType=VARCHAR},
      </if>
      <if test="record.pfActual != null">
        PF_ACTUAL = #{record.pfActual,jdbcType=TINYINT},
      </if>
      <if test="record.pfGeter != null">
        PF_GETER = #{record.pfGeter,jdbcType=VARCHAR},
      </if>
      <if test="record.pfPayer != null">
        PF_PAYER = #{record.pfPayer,jdbcType=VARCHAR},
      </if>
      <if test="record.payAmount != null">
        PAY_AMOUNT = #{record.payAmount,jdbcType=DECIMAL},
      </if>
      <if test="record.pfDesc != null">
        PF_DESC = #{record.pfDesc,jdbcType=VARCHAR},
      </if>
      <if test="record.pfTime != null">
        PF_TIME = #{record.pfTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.paymentId != null">
        PAYMENT_ID = #{record.paymentId,jdbcType=INTEGER},
      </if>
      <if test="record.auditStatus != null">
        AUDIT_STATUS = #{record.auditStatus,jdbcType=VARCHAR},
      </if>
      <if test="record.dueDate != null">
        DUE_DATE = #{record.dueDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.auditTime != null">
        AUDIT_TIME = #{record.auditTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.auditUser != null">
        AUDIT_USER = #{record.auditUser,jdbcType=VARCHAR},
      </if>
      <if test="record.auditUserName != null">
        AUDIT_USER_NAME = #{record.auditUserName,jdbcType=VARCHAR},
      </if>
      <if test="record.actualReceiptNum != null">
        ACTUAL_RECEIPT_NUM = #{record.actualReceiptNum,jdbcType=VARCHAR},
      </if>
      <if test="record.isProfit != null">
        IS_PROFIT = #{record.isProfit,jdbcType=TINYINT},
      </if>
      <if test="record.performanceType != null">
        PERFORMANCE_TYPE = #{record.performanceType,jdbcType=TINYINT},
      </if>
      <if test="record.discount != null">
        DISCOUNT = #{record.discount,jdbcType=NUMERIC},
      </if>
      <if test="record.paymentType != null">
        PAYMENT_TYPE = #{record.paymentType,jdbcType=INTEGER},
      </if>
      <if test="record.payAccount != null">
        PAY_ACCOUNT = #{record.payAccount,jdbcType=VARCHAR},
      </if>
      <if test="record.orderNo != null">
        ORDER_NO = #{record.orderNo,jdbcType=VARCHAR},
      </if>
      <if test="record.payTypeDesc != null">
        PAY_TYPE_DESC = #{record.payTypeDesc,jdbcType=VARCHAR},
      </if>
      <if test="record.receiptMoneyUser != null">
        RECEIPT_MONEY_USER = #{record.receiptMoneyUser,jdbcType=INTEGER},
      </if>
      <if test="record.receiptMoneyDept != null">
        RECEIPT_MONEY_DEPT = #{record.receiptMoneyDept,jdbcType=INTEGER},
      </if>
      <if test="record.isPrint != null">
        IS_PRINT = #{record.isPrint,jdbcType=TINYINT},
      </if>
      <if test="record.billCodeId != null">
        BILL_CODE_ID = #{record.billCodeId,jdbcType=INTEGER},
      </if>
      <if test="record.billCodeNo != null">
        BILL_CODE_NO = #{record.billCodeNo,jdbcType=VARCHAR},
      </if>
      <if test="record.billPhoto != null">
        BILL_PHOTO = #{record.billPhoto,jdbcType=VARCHAR},
      </if>
      <if test="record.billWay != null">
        BILL_WAY = #{record.billWay,jdbcType=TINYINT},
      </if>
      <if test="record.createTime != null">
        CREATE_TIME = #{record.createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.createUid != null">
        CREATE_UID = #{record.createUid,jdbcType=INTEGER},
      </if>
      <if test="record.onlinePaymentReceiptFileId != null">
        ONLINE_PAYMENT_RECEIPT_FILE_ID = #{record.onlinePaymentReceiptFileId,jdbcType=INTEGER},
      </if>
      <if test="record.payType != null">
        PAY_TYPE = #{record.payType,jdbcType=INTEGER},
      </if>
      <if test="record.itemSource != null">
        ITEM_SOURCE = #{record.itemSource,jdbcType=TINYINT},
      </if>
      <if test="record.sourceId != null">
        SOURCE_ID = #{record.sourceId,jdbcType=INTEGER},
      </if>
      <if test="record.serialNumber != null">
        SERIAL_NUMBER = #{record.serialNumber,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--@mbggenerated-->
    update PROCESS_FINANC
    set PF_ID = #{record.pfId,jdbcType=INTEGER},
      COMP_ID = #{record.compId,jdbcType=INTEGER},
      DEAL_ID = #{record.dealId,jdbcType=INTEGER},
      PF_NAME = #{record.pfName,jdbcType=VARCHAR},
      PF_ACTUAL = #{record.pfActual,jdbcType=TINYINT},
      PF_GETER = #{record.pfGeter,jdbcType=VARCHAR},
      PF_PAYER = #{record.pfPayer,jdbcType=VARCHAR},
      PAY_AMOUNT = #{record.payAmount,jdbcType=DECIMAL},
      PF_DESC = #{record.pfDesc,jdbcType=VARCHAR},
      PF_TIME = #{record.pfTime,jdbcType=TIMESTAMP},
      PAYMENT_ID = #{record.paymentId,jdbcType=INTEGER},
      AUDIT_STATUS = #{record.auditStatus,jdbcType=VARCHAR},
      DUE_DATE = #{record.dueDate,jdbcType=TIMESTAMP},
      AUDIT_TIME = #{record.auditTime,jdbcType=TIMESTAMP},
      AUDIT_USER = #{record.auditUser,jdbcType=VARCHAR},
      AUDIT_USER_NAME = #{record.auditUserName,jdbcType=VARCHAR},
      ACTUAL_RECEIPT_NUM = #{record.actualReceiptNum,jdbcType=VARCHAR},
      IS_PROFIT = #{record.isProfit,jdbcType=TINYINT},
      PERFORMANCE_TYPE = #{record.performanceType,jdbcType=TINYINT},
      DISCOUNT = #{record.discount,jdbcType=NUMERIC},
      PAYMENT_TYPE = #{record.paymentType,jdbcType=INTEGER},
      PAY_ACCOUNT = #{record.payAccount,jdbcType=VARCHAR},
      ORDER_NO = #{record.orderNo,jdbcType=VARCHAR},
      PAY_TYPE_DESC = #{record.payTypeDesc,jdbcType=VARCHAR},
      RECEIPT_MONEY_USER = #{record.receiptMoneyUser,jdbcType=INTEGER},
      RECEIPT_MONEY_DEPT = #{record.receiptMoneyDept,jdbcType=INTEGER},
      IS_PRINT = #{record.isPrint,jdbcType=TINYINT},
      BILL_CODE_ID = #{record.billCodeId,jdbcType=INTEGER},
      BILL_CODE_NO = #{record.billCodeNo,jdbcType=VARCHAR},
      BILL_PHOTO = #{record.billPhoto,jdbcType=VARCHAR},
      BILL_WAY = #{record.billWay,jdbcType=TINYINT},
      CREATE_TIME = #{record.createTime,jdbcType=TIMESTAMP},
      CREATE_UID = #{record.createUid,jdbcType=INTEGER},
      ONLINE_PAYMENT_RECEIPT_FILE_ID = #{record.onlinePaymentReceiptFileId,jdbcType=INTEGER},
      PAY_TYPE = #{record.payType,jdbcType=INTEGER},
      ITEM_SOURCE = #{record.itemSource,jdbcType=TINYINT},
      SOURCE_ID = #{record.sourceId,jdbcType=INTEGER},
      SERIAL_NUMBER = #{record.serialNumber,jdbcType=VARCHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.myfun.repository.erpdb.po.ErpProcessFinanc">
    <!--@mbggenerated-->
    update PROCESS_FINANC
    <set>
      <if test="compId != null">
        COMP_ID = #{compId,jdbcType=INTEGER},
      </if>
      <if test="dealId != null">
        DEAL_ID = #{dealId,jdbcType=INTEGER},
      </if>
      <if test="pfName != null">
        PF_NAME = #{pfName,jdbcType=VARCHAR},
      </if>
      <if test="pfActual != null">
        PF_ACTUAL = #{pfActual,jdbcType=TINYINT},
      </if>
      <if test="pfGeter != null">
        PF_GETER = #{pfGeter,jdbcType=VARCHAR},
      </if>
      <if test="pfPayer != null">
        PF_PAYER = #{pfPayer,jdbcType=VARCHAR},
      </if>
      <if test="payAmount != null">
        PAY_AMOUNT = #{payAmount,jdbcType=DECIMAL},
      </if>
      <if test="pfDesc != null">
        PF_DESC = #{pfDesc,jdbcType=VARCHAR},
      </if>
      <if test="pfTime != null">
        PF_TIME = #{pfTime,jdbcType=TIMESTAMP},
      </if>
      <if test="paymentId != null">
        PAYMENT_ID = #{paymentId,jdbcType=INTEGER},
      </if>
      <if test="auditStatus != null">
        AUDIT_STATUS = #{auditStatus,jdbcType=VARCHAR},
      </if>
      <if test="dueDate != null">
        DUE_DATE = #{dueDate,jdbcType=TIMESTAMP},
      </if>
      <if test="auditTime != null">
        AUDIT_TIME = #{auditTime,jdbcType=TIMESTAMP},
      </if>
      <if test="auditUser != null">
        AUDIT_USER = #{auditUser,jdbcType=VARCHAR},
      </if>
      <if test="auditUserName != null">
        AUDIT_USER_NAME = #{auditUserName,jdbcType=VARCHAR},
      </if>
      <if test="actualReceiptNum != null">
        ACTUAL_RECEIPT_NUM = #{actualReceiptNum,jdbcType=VARCHAR},
      </if>
      <if test="isProfit != null">
        IS_PROFIT = #{isProfit,jdbcType=TINYINT},
      </if>
      <if test="performanceType != null">
        PERFORMANCE_TYPE = #{performanceType,jdbcType=TINYINT},
      </if>
      <if test="discount != null">
        DISCOUNT = #{discount,jdbcType=NUMERIC},
      </if>
      <if test="paymentType != null">
        PAYMENT_TYPE = #{paymentType,jdbcType=INTEGER},
      </if>
      <if test="payAccount != null">
        PAY_ACCOUNT = #{payAccount,jdbcType=VARCHAR},
      </if>
      <if test="orderNo != null">
        ORDER_NO = #{orderNo,jdbcType=VARCHAR},
      </if>
      <if test="payTypeDesc != null">
        PAY_TYPE_DESC = #{payTypeDesc,jdbcType=VARCHAR},
      </if>
      <if test="receiptMoneyUser != null">
        RECEIPT_MONEY_USER = #{receiptMoneyUser,jdbcType=INTEGER},
      </if>
      <if test="receiptMoneyDept != null">
        RECEIPT_MONEY_DEPT = #{receiptMoneyDept,jdbcType=INTEGER},
      </if>
      <if test="isPrint != null">
        IS_PRINT = #{isPrint,jdbcType=TINYINT},
      </if>
      <if test="billCodeId != null">
        BILL_CODE_ID = #{billCodeId,jdbcType=INTEGER},
      </if>
      <if test="billCodeNo != null">
        BILL_CODE_NO = #{billCodeNo,jdbcType=VARCHAR},
      </if>
      <if test="billPhoto != null">
        BILL_PHOTO = #{billPhoto,jdbcType=VARCHAR},
      </if>
      <if test="billWay != null">
        BILL_WAY = #{billWay,jdbcType=TINYINT},
      </if>
      <if test="createTime != null">
        CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createUid != null">
        CREATE_UID = #{createUid,jdbcType=INTEGER},
      </if>
      <if test="onlinePaymentReceiptFileId != null">
        ONLINE_PAYMENT_RECEIPT_FILE_ID = #{onlinePaymentReceiptFileId,jdbcType=INTEGER},
      </if>
      <if test="payType != null">
        PAY_TYPE = #{payType,jdbcType=INTEGER},
      </if>
      <if test="itemSource != null">
        ITEM_SOURCE = #{itemSource,jdbcType=TINYINT},
      </if>
      <if test="sourceId != null">
        SOURCE_ID = #{sourceId,jdbcType=INTEGER},
      </if>
      <if test="serialNumber != null">
        SERIAL_NUMBER = #{serialNumber,jdbcType=VARCHAR},
      </if>
    </set>
    where PF_ID = #{pfId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.myfun.repository.erpdb.po.ErpProcessFinanc">
    <!--@mbggenerated-->
    update PROCESS_FINANC
    set COMP_ID = #{compId,jdbcType=INTEGER},
      DEAL_ID = #{dealId,jdbcType=INTEGER},
      PF_NAME = #{pfName,jdbcType=VARCHAR},
      PF_ACTUAL = #{pfActual,jdbcType=TINYINT},
      PF_GETER = #{pfGeter,jdbcType=VARCHAR},
      PF_PAYER = #{pfPayer,jdbcType=VARCHAR},
      PAY_AMOUNT = #{payAmount,jdbcType=DECIMAL},
      PF_DESC = #{pfDesc,jdbcType=VARCHAR},
      PF_TIME = #{pfTime,jdbcType=TIMESTAMP},
      PAYMENT_ID = #{paymentId,jdbcType=INTEGER},
      AUDIT_STATUS = #{auditStatus,jdbcType=VARCHAR},
      DUE_DATE = #{dueDate,jdbcType=TIMESTAMP},
      AUDIT_TIME = #{auditTime,jdbcType=TIMESTAMP},
      AUDIT_USER = #{auditUser,jdbcType=VARCHAR},
      AUDIT_USER_NAME = #{auditUserName,jdbcType=VARCHAR},
      ACTUAL_RECEIPT_NUM = #{actualReceiptNum,jdbcType=VARCHAR},
      IS_PROFIT = #{isProfit,jdbcType=TINYINT},
      PERFORMANCE_TYPE = #{performanceType,jdbcType=TINYINT},
      DISCOUNT = #{discount,jdbcType=NUMERIC},
      PAYMENT_TYPE = #{paymentType,jdbcType=INTEGER},
      PAY_ACCOUNT = #{payAccount,jdbcType=VARCHAR},
      ORDER_NO = #{orderNo,jdbcType=VARCHAR},
      PAY_TYPE_DESC = #{payTypeDesc,jdbcType=VARCHAR},
      RECEIPT_MONEY_USER = #{receiptMoneyUser,jdbcType=INTEGER},
      RECEIPT_MONEY_DEPT = #{receiptMoneyDept,jdbcType=INTEGER},
      IS_PRINT = #{isPrint,jdbcType=TINYINT},
      BILL_CODE_ID = #{billCodeId,jdbcType=INTEGER},
      BILL_CODE_NO = #{billCodeNo,jdbcType=VARCHAR},
      BILL_PHOTO = #{billPhoto,jdbcType=VARCHAR},
      BILL_WAY = #{billWay,jdbcType=TINYINT},
      CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      CREATE_UID = #{createUid,jdbcType=INTEGER},
      ONLINE_PAYMENT_RECEIPT_FILE_ID = #{onlinePaymentReceiptFileId,jdbcType=INTEGER},
      PAY_TYPE = #{payType,jdbcType=INTEGER},
      ITEM_SOURCE = #{itemSource,jdbcType=TINYINT},
      SOURCE_ID = #{sourceId,jdbcType=INTEGER},
      SERIAL_NUMBER = #{serialNumber,jdbcType=VARCHAR}
    where PF_ID = #{pfId,jdbcType=INTEGER}
  </update>
  <select id="getFinancComssionInfoByDealId" resultType="map">
    select sum(iif(A.PF_PAYER=1,A.PAY_AMOUNT,0)) as buyCommission,sum(iif(A.PF_PAYER=2,A.PAY_AMOUNT,0)) as sellCommission from PROCESS_FINANC A left join FUN_FINANC_PAYMENT B on A.PAYMENT_ID = B.PAYMENT_ID AND A.COMP_ID = B.COMP_ID where A.COMP_ID = #{compId} and A.DEAL_ID = #{dealId} and A.PF_ACTUAL = 0 and B.EN_NAME ='COMMISSION' 
  </select>
  <select id="getFinancComssionInfoNameByDealId" resultType="map">
    select A.PF_NAME as pfName,A.PF_PAYER as pfPayer from PROCESS_FINANC A left join FUN_FINANC_PAYMENT B on A.PAYMENT_ID = B.PAYMENT_ID AND A.COMP_ID = B.COMP_ID where A.COMP_ID = #{compId} and A.DEAL_ID = #{dealId} and A.PF_ACTUAL = 0 and B.EN_NAME ='COMMISSION' group by A.PF_NAME,A.PF_PAYER
  </select>
  <select id="getInitProcessFinanc" resultType="map">
   select 
   sum(iif(A.PF_ACTUAL=0 and A.PF_PAYER=1 and B.EN_NAME='MORTGAGE_AGENCY_FEE',A.PAY_AMOUNT,0)) as paymentMortgage, 
   sum(iif(A.PF_ACTUAL=0 and A.PF_PAYER=1 and B.EN_NAME='TRANSFER_FEE',A.PAY_AMOUNT,0)) as paymentTransfer,
   sum(iif(A.PF_ACTUAL=1 and A.PF_PAYER=1 and B.EN_NAME='DEPOSIT',A.PAY_AMOUNT,0)) as paymentDeposit 
   from PROCESS_FINANC A join FUN_FINANC_PAYMENT B on A.PAYMENT_ID = B.PAYMENT_ID where A.DEAL_ID = #{dealId} AND len(B.EN_NAME)&gt;0 
  </select>
  <resultMap extends="BaseResultMap" id="extBaseResultMap" type="com.myfun.repository.erpdb.dto.ErpProcessFinancDto">
	  <result column="PAY_STATUS" jdbcType="INTEGER" property="payStatus" />
	  <result column="id" jdbcType="INTEGER" property="orderId" />
	  <result column="FINANC_SHOULDGET" jdbcType="INTEGER" property="financShouldget" />
	  <result column="ACTUAL_PROFIT" jdbcType="INTEGER" property="actualProfit" />
	  <result column="SHOULDGET_ADUITED" jdbcType="VARCHAR" property="shouldgetAduited" />
	  <result column="ACUTALGET_ADUITED" jdbcType="VARCHAR" property="acutalgetAduited" />

	  <result column="TRANSFER_NEED_PERFORMANCE" jdbcType="NUMERIC" property="transferNeedPerformance" />
	  <result column="TRANSFER_REAL_PERFORMANCE" jdbcType="NUMERIC" property="transferRealPerformance" />
	  <result column="SECONDHAND_NEED_PERFORMANCE" jdbcType="NUMERIC" property="secondhandNeedPerformance" />
	  <result column="SECONDHAND_REAL_PERFORMANCE" jdbcType="NUMERIC" property="secondhandRealPerformance" />
	  <result column="NEWHOUSE_NEED_PERFORMANCE" jdbcType="NUMERIC" property="newhouseNeedPerformance" />
	  <result column="NEWHOUSE_REAL_PERFORMANCE" jdbcType="NUMERIC" property="newhouseRealPerformance" />
	  <result column="LEASE_NEED_PERFORMANCE" jdbcType="NUMERIC" property="leaseNeedPerformance" />
	  <result column="LEASE_REAL_PERFORMANCE" jdbcType="NUMERIC" property="leaseRealPerformance" />
	  <result column="FINANCE_NEED_PERFORMANCE" jdbcType="NUMERIC" property="financeNeedPerformance" />
	  <result column="FINANCE_REAL_PERFORMANCE" jdbcType="NUMERIC" property="financeRealPerformance" />
	  <result column="TOTAL_NEED_PERFORMANCE" jdbcType="NUMERIC" property="totalNeedPerformance" />
	  <result column="TOTAL_REAL_PERFORMANCE" jdbcType="NUMERIC" property="totalRealPerformance" />
	  <result column="TOTAL_NEED_INCOME" jdbcType="NUMERIC" property="totalNeedIncome" />
	  <result column="TOTAL_REAL_INCOME" jdbcType="NUMERIC" property="totalRealIncome" />

	  <result column="BUY_CUSTOMER_COMMSION" jdbcType="NUMERIC" property="buyCustomerCommsion" />
	  <result column="SELL_OWNER_COMMSION" jdbcType="NUMERIC" property="sellOwnerCommsion" />
	  <result column="PAY_TYPE" jdbcType="INTEGER" property="payType" />

  </resultMap>

  <select id="getList" resultMap="extBaseResultMap">
    SELECT b.PAY_STATUS,b.ID, a.* from PROCESS_FINANC a
    LEFT JOIN POS_PAYMENT_ORDER b on a.pf_id = b.FINANCE_ID and b.FINANCE_TYPE = 2 AND b.pay_Status!=3
    WHERE a.COMP_ID=#{compId} and a.DEAL_ID=#{dealId}
    ORDER BY CREATE_TIME DESC
  </select>
  
  <update id="delBillPhoto">
   update PROCESS_FINANC set BILL_PHOTO = null where PF_ID = #{financId}
  </update>

  <select id="getProcessFinancList" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List" />
    FROM PROCESS_FINANC
    WHERE 1=1
    <if test="param.pfPayer != null">
      AND PF_PAYER = #{param.pfPayer}
    </if>
    <if test="param.auditStatus != null">
      AND AUDIT_STATUS = #{param.auditStatus}
    </if>
    <if test="param.auditUser != null">
      AND auditUser = #{param.auditUser}
    </if>
    <if test="param.performanceType != null">
      AND PERFORMANCE_TYPE = #{param.performanceType}
    </if>
    <if test="param.pfActual != null">
      AND PF_ACTUAL = #{param.pfActual}
    </if>
    <if test="param.paymentId != null">
      <choose>
        <when test="param.paymentId == 'commission'">
          <if test="param.paymentIds != null">
            AND PAYMENT_ID IN
            <foreach close=")" collection="param.paymentIds" item="paymentId" open="(" separator=",">
              #{paymentId}
            </foreach>
          </if>
        </when>
        <otherwise>
          AND PAYMENT_ID = #{param.paymentId}
        </otherwise>
      </choose>
    </if>
    <if test="param.dateType == 'AUDIT_DATE'">
      <if test="param.startTime != null and param.endTime != null">
        AND AUDIT_TIME <![CDATA[>=]]> #{param.startTime}
        AND AUDIT_TIME <![CDATA[<=]]> #{param.endTime}
      </if>
    </if>
    <if test="param.pfTime != null">
      <if test="param.startTime != null and param.endTime != null">
          AND PF_TIME <![CDATA[>=]]> #{param.startTime}
          AND PF_TIME <![CDATA[<=]]> #{param.endTime}
      </if>
    </if>

    <if test="param.dealIds != null and param.dealIds.size &gt; 0">
      AND DEAL_ID IN
      <foreach close=")" collection="param.dealIds" item="dealId" open="(" separator=",">
        #{dealId}
      </foreach>
    </if>
  </select>
	
	<select id="countProcessFinanc" resultType="java.lang.Integer">
		select count (*)
		from PROCESS_FINANC
		where COMP_ID = #{compId} and PF_ACTUAL = #{pfActual}
		<if test="dealId!=null">
			and DEAL_ID=#{dealId}
		</if>
		<if test="pfIdArr!=null">
			and PF_ID in
			<foreach close=")" collection="pfIdArr" item="pfId" open="(" separator=",">
				#{pfId}
			</foreach>
		</if>
	</select>
	
	<update id="updateProcessFinanc">
		update PROCESS_FINANC set AUDIT_STATUS = #{param.auditStatus}
        <if test="param.auditTime!=null">
          ,AUDIT_TIME = #{param.auditTime}
        </if>
        <if test="param.auditUser!=null">
          ,AUDIT_USER = #{param.auditUser}
        </if>
        <if test="param.auditUserName!=null">
          ,AUDIT_USER_NAME = #{param.auditUserName}
        </if>
		where COMP_ID = #{compId} and PF_ACTUAL = #{pfActual} and DEAL_ID = #{dealId} and PF_ID in
		<foreach close=")" collection="pfIdArr" item="pfId" open="(" separator=",">
			#{pfId}
		</foreach>
	</update>
	
	<select id="getFinancActualgetByDeal" resultMap="extBaseResultMap">
		select sum(iif(PF_ACTUAL=0 and IS_PROFIT=1,PAY_AMOUNT,0)) as FINANC_SHOULDGET,sum(iif(PF_ACTUAL=1 and IS_PROFIT=1,PAY_AMOUNT,0)) as ACTUAL_PROFIT,sum(iif(PF_ACTUAL=0 and AUDIT_STATUS=1 ,PAY_AMOUNT,iif(PF_ACTUAL=1,0,-1))) as SHOULDGET_ADUITED,sum(iif(PF_ACTUAL=1 and AUDIT_STATUS=1,PAY_AMOUNT,iif(PF_ACTUAL=0,0,-1))) as ACUTALGET_ADUITED
		from PROCESS_FINANC
		where DEAL_ID = #{dealId}
	</select>
	
	<select id="getProcessFinancDtoByDealId" resultMap="extBaseResultMap">
		select SUM(iif(PF_ACTUAL=0 and PERFORMANCE_TYPE=1    and PF_GETER=3,PAY_AMOUNT,0)) as TRANSFER_NEED_PERFORMANCE,
               SUM(iif(PF_ACTUAL=1 and PERFORMANCE_TYPE=1    and PF_GETER=3,PAY_AMOUNT,0)) as TRANSFER_REAL_PERFORMANCE,
               SUM(iif(PF_ACTUAL=0 and PERFORMANCE_TYPE=2    and PF_GETER=3,PAY_AMOUNT,0)) as SECONDHAND_NEED_PERFORMANCE,
               SUM(iif(PF_ACTUAL=1 and PERFORMANCE_TYPE=2    and PF_GETER=3,PAY_AMOUNT,0)) as SECONDHAND_REAL_PERFORMANCE,
               SUM(iif(PF_ACTUAL=0 and PERFORMANCE_TYPE=3    and PF_GETER=3,PAY_AMOUNT,0)) as NEWHOUSE_NEED_PERFORMANCE,
               SUM(iif(PF_ACTUAL=1 and PERFORMANCE_TYPE=3    and PF_GETER=3,PAY_AMOUNT,0)) as NEWHOUSE_REAL_PERFORMANCE,
               SUM(iif(PF_ACTUAL=0 and PERFORMANCE_TYPE=4    and PF_GETER=3,PAY_AMOUNT,0)) as LEASE_NEED_PERFORMANCE,
               SUM(iif(PF_ACTUAL=1 and PERFORMANCE_TYPE=4    and PF_GETER=3,PAY_AMOUNT,0)) as LEASE_REAL_PERFORMANCE,
               SUM(iif(PF_ACTUAL=0 and PERFORMANCE_TYPE=5    and PF_GETER=3,PAY_AMOUNT,0)) as FINANCE_NEED_PERFORMANCE,
               SUM(iif(PF_ACTUAL=1 and PERFORMANCE_TYPE=5    and PF_GETER=3,PAY_AMOUNT,0)) as FINANCE_REAL_PERFORMANCE,
               SUM(iif(PF_ACTUAL=0 and PERFORMANCE_TYPE&gt;0 and PF_GETER=3,PAY_AMOUNT,0)) as TOTAL_NEED_PERFORMANCE,
               SUM(iif(PF_ACTUAL=1 and PERFORMANCE_TYPE&gt;0 and PF_GETER=3,PAY_AMOUNT,0)) as TOTAL_REAL_PERFORMANCE,
               SUM(iif(PF_ACTUAL=0 and PF_GETER=3,PAY_AMOUNT,0)) as TOTAL_NEED_INCOME,
               SUM(iif(PF_ACTUAL=1 and PF_GETER=3,PAY_AMOUNT,0)) as TOTAL_REAL_INCOME
		from PROCESS_FINANC
		where DEAL_ID = #{dealId}
	</select>
	
	<select id="getHasFinancList" resultMap="BaseResultMap">
		select BILL_CODE_NO,BILL_WAY,PF_ID
		from PROCESS_FINANC
		where  BILL_CODE_NO is NOT NULL and PF_ACTUAL = 1 and DEAL_ID = #{dealId} and COMP_ID = #{compId}
	</select>
	
	<delete id="delProcessFinanc">
		delete from PROCESS_FINANC
		where COMP_ID = #{compId} and PF_ACTUAL = #{pfActual} and DEAL_ID = #{dealId} and PF_ID in
		<foreach close=")" collection="pfIds" item="pfId" open="(" separator=",">
			#{pfId}
		</foreach>
	</delete>
	
	<select id="getProcessFinancByDealId" resultMap="extBaseResultMap">
		select sum(iif(A.PF_ACTUAL = 0 and A.PF_PAYER = 1,A.PAY_AMOUNT,0)) as BUY_CUSTOMER_COMMSION,
		sum(iif(A.PF_ACTUAL = 0 and A.PF_PAYER = 2,A.PAY_AMOUNT,0)) as SELL_OWNER_COMMSION
		from PROCESS_FINANC A left join FUN_FINANC_PAYMENT B ON A.PAYMENT_ID = B.PAYMENT_ID
		where A.PF_ACTUAL = 0 and A.COMP_ID = #{compId} and A.DEAL_ID = #{dealId}
	</select>
	
	<select id="getProcessFinancListByDealId" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from PROCESS_FINANC
		where DEAL_ID = #{dealId} and COMP_ID = #{compId} and AUDIT_STATUS = 1 and PERFORMANCE_TYPE &gt; 0
	</select>
	
	<select id="getPfActualListOffDeal" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from PROCESS_FINANC
		<where>
			<if test="param.pfPayer!=null">
				and PF_PAYER = #{param.pfPayer}
			</if>
			<if test="param.auditStatus!=null">
				and AUDIT_STATUS = #{param.auditStatus}
			</if>
			<if test="param.auditUser!=null">
				and AUDIT_USER = #{param.auditUser}
			</if>
			<if test="param.performanceType!=null">
				and PERFORMANCE_TYPE = #{param.performanceType}
			</if>
			
			<if test="param.intelligentSearch!=null and param.intelligentSearch!=''">
         		 AND (SERIAL_NUMBER LIKE  '%${param.intelligentSearch}%' OR PAY_ACCOUNT LIKE  '%${param.intelligentSearch}%')  
        	</if>
        
			<if test="param.pfActual!=null">
				and PF_ACTUAL = #{param.pfActual}
			</if>
			<if test="param.paymentId!=null and param.paymentId!=''">
				<choose>
					<when test="param.paymentId=='commission'">
						<if test="param.paymentIds!=null">
							and PAYMENT_ID in
							<foreach close=")" collection="param.paymentIds" item="paymentId" open="(" separator=",">
								#{paymentId}
							</foreach>
						</if>
					</when>
					<otherwise>
							and PAYMENT_ID = #{param.paymentId}
					</otherwise>
				</choose>
			</if>
			<if test="param.dateType!=null and param.dateType!=''">
				<if test="param.dateType == 'AUDIT_DATE'">
					<if test="param.startTime!=null and param.startTime!=''">
						and ${param.dateType} &gt;= #{param.startTime}
					</if>
					<if test="param.endTime!=null and param.endTime!=''">
						and ${param.dateType} &lt;= #{param.endTime}
					</if>
				</if>
			</if>
			<if test="param.pfTime!=null">
				<if test="param.startTime!=null and param.startTime!=''">
					and PF_TIME &gt;= #{param.startTime}
				</if>
				<if test="param.endTime!=null and param.endTime!=''">
					and PF_TIME &lt;= #{param.endTime}
				</if>
			</if>
			<if test="param.dealIds!=null">
				and DEAL_ID in
				<foreach close=")" collection="param.dealIds" item="dealId" open="(" separator=",">
					#{dealId}
				</foreach>
			</if>
		</where>
	</select>
 	<select id="getFinancListByDealId" resultMap="BaseResultMap">
	    SELECT
	    <include refid="Base_Column_List" />
	    from PROCESS_FINANC
	    where DEAL_ID = #{dealId}
	    <if test="pfActual !=null and pfActual != ''">
		    and PF_ACTUAL = #{pfActual}
		</if>
		ORDER BY PD_ID ASC
    </select>
  <select id="selectProcessFinancByPfIds" resultMap="BaseResultMap">
    select <include refid="Base_Column_List" />
    from PROCESS_FINANC
    where COMP_ID = #{compId} and PF_ACTUAL = #{pfActual}
    <if test="dealId!=null">
      and DEAL_ID=#{dealId}
    </if>
    <if test="pfIdArr!=null">
      and PF_ID in
      <foreach close=")" collection="pfIdArr" item="pfId" open="(" separator=",">
        #{pfId}
      </foreach>
    </if>
  </select>

  <update id="updateProcessFinancStatus">
    update PROCESS_FINANC set AUDIT_STATUS = #{auditStatus}
    where COMP_ID = #{compId}  and DEAL_ID=#{dealId}
    <if test="pfIds!=null">
      and PF_ID in
      <foreach close=")" collection="pfIds" item="pfId" open="(" separator=",">
        #{pfId}
      </foreach>
    </if>
  </update>
  
  <select id="getProcessFinancByDealIds" resultMap="BaseResultMap">
		SELECT DEAL_ID, PF_ACTUAL, PF_PAYER, PAY_AMOUNT 
		FROM PROCESS_FINANC 
		WHERE COMP_ID = #{compId} AND DEAL_ID IN 
		<foreach close=")" collection="dealIdList" item="dealId" open="(" separator=",">
			#{dealId}
		</foreach>
	</select>
	
	<select id="getPfTimeByDealId" resultType="java.lang.String">
		SELECT TOP 1 PF_TIME FROM PROCESS_FINANC WHERE COMP_ID = #{compId} AND DEAL_ID = #{dealId} AND PF_ACTUAL = 1 AND PF_TIME IS NOT NULL
	</select>
  <select id="sumPayAmount" resultType="java.math.BigDecimal">
        select sum(PAY_AMOUNT) from PROCESS_FINANC where DEAL_ID = #{erpProcessFinanc.dealId} and PF_ACTUAL = 1 and PF_NAME = #{erpProcessFinanc.pfName} and PF_GETER = #{erpProcessFinanc.pfGeter}
        and PF_PAYER = #{erpProcessFinanc.pfPayer}
  </select>
</mapper>