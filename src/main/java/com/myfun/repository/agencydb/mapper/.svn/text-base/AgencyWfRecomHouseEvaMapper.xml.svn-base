<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myfun.repository.agencydb.dao.AgencyWfRecomHouseEvaMapper">
  <resultMap id="BaseResultMap" type="com.myfun.repository.agencydb.po.AgencyWfRecomHouseEva">
    <!--@mbggenerated-->
    <id column="ID" jdbcType="INTEGER" property="id" />
    <result column="WX_ID" jdbcType="INTEGER" property="wxId" />
    <result column="PUSH_LOG_ID" jdbcType="INTEGER" property="pushLogId" />
    <result column="RECOM_HOUSE_ID" jdbcType="INTEGER" property="recomHouseId" />
    <result column="ARCHIVE_ID" jdbcType="INTEGER" property="archiveId" />
    <result column="REAL_HOUSE" jdbcType="TINYINT" property="realHouse" />
    <result column="EVA_TAG" jdbcType="VARCHAR" property="evaTag" />
    <result column="EVA_STAR" jdbcType="TINYINT" property="evaStar" />
    <result column="EVA_CONTENT" jdbcType="VARCHAR" property="evaContent" />
    <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
    <result column="CITY_ID" jdbcType="INTEGER" property="cityId" />
    <result column="IS_VERTIFY" jdbcType="TINYINT" property="isVertify" />
    <result column="VERTIFY_TIME" jdbcType="TIMESTAMP" property="vertifyTime" />
    <result column="OPERATOR_ID" jdbcType="INTEGER" property="operatorId" />
    <result column="SHOW_STATUS" jdbcType="INTEGER" property="showStatus" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--@mbggenerated-->
    ID, WX_ID, PUSH_LOG_ID, RECOM_HOUSE_ID, ARCHIVE_ID, REAL_HOUSE, EVA_TAG, EVA_STAR, 
    EVA_CONTENT, CREATE_TIME, CITY_ID, IS_VERTIFY, VERTIFY_TIME, OPERATOR_ID, SHOW_STATUS
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--@mbggenerated-->
    select 
    <include refid="Base_Column_List" />
    from WF_RECOM_HOUSE_EVA
    where ID = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--@mbggenerated-->
    delete from WF_RECOM_HOUSE_EVA
    where ID = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.myfun.repository.agencydb.po.AgencyWfRecomHouseEva">
    <!--@mbggenerated-->
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
      SELECT SCOPE_IDENTITY()
    </selectKey>
    insert into WF_RECOM_HOUSE_EVA (WX_ID, PUSH_LOG_ID, RECOM_HOUSE_ID, 
      ARCHIVE_ID, REAL_HOUSE, EVA_TAG, 
      EVA_STAR, EVA_CONTENT, CREATE_TIME, 
      CITY_ID, IS_VERTIFY, VERTIFY_TIME, 
      OPERATOR_ID, SHOW_STATUS)
    values (#{wxId,jdbcType=INTEGER}, #{pushLogId,jdbcType=INTEGER}, #{recomHouseId,jdbcType=INTEGER}, 
      #{archiveId,jdbcType=INTEGER}, #{realHouse,jdbcType=TINYINT}, #{evaTag,jdbcType=VARCHAR}, 
      #{evaStar,jdbcType=TINYINT}, #{evaContent,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, 
      #{cityId,jdbcType=INTEGER}, #{isVertify,jdbcType=TINYINT}, #{vertifyTime,jdbcType=TIMESTAMP}, 
      #{operatorId,jdbcType=INTEGER}, #{showStatus,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.myfun.repository.agencydb.po.AgencyWfRecomHouseEva">
    <!--@mbggenerated-->
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
      SELECT SCOPE_IDENTITY()
    </selectKey>
    insert into WF_RECOM_HOUSE_EVA
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="wxId != null">
        WX_ID,
      </if>
      <if test="pushLogId != null">
        PUSH_LOG_ID,
      </if>
      <if test="recomHouseId != null">
        RECOM_HOUSE_ID,
      </if>
      <if test="archiveId != null">
        ARCHIVE_ID,
      </if>
      <if test="realHouse != null">
        REAL_HOUSE,
      </if>
      <if test="evaTag != null">
        EVA_TAG,
      </if>
      <if test="evaStar != null">
        EVA_STAR,
      </if>
      <if test="evaContent != null">
        EVA_CONTENT,
      </if>
      <if test="createTime != null">
        CREATE_TIME,
      </if>
      <if test="cityId != null">
        CITY_ID,
      </if>
      <if test="isVertify != null">
        IS_VERTIFY,
      </if>
      <if test="vertifyTime != null">
        VERTIFY_TIME,
      </if>
      <if test="operatorId != null">
        OPERATOR_ID,
      </if>
      <if test="showStatus != null">
        SHOW_STATUS,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="wxId != null">
        #{wxId,jdbcType=INTEGER},
      </if>
      <if test="pushLogId != null">
        #{pushLogId,jdbcType=INTEGER},
      </if>
      <if test="recomHouseId != null">
        #{recomHouseId,jdbcType=INTEGER},
      </if>
      <if test="archiveId != null">
        #{archiveId,jdbcType=INTEGER},
      </if>
      <if test="realHouse != null">
        #{realHouse,jdbcType=TINYINT},
      </if>
      <if test="evaTag != null">
        #{evaTag,jdbcType=VARCHAR},
      </if>
      <if test="evaStar != null">
        #{evaStar,jdbcType=TINYINT},
      </if>
      <if test="evaContent != null">
        #{evaContent,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="cityId != null">
        #{cityId,jdbcType=INTEGER},
      </if>
      <if test="isVertify != null">
        #{isVertify,jdbcType=TINYINT},
      </if>
      <if test="vertifyTime != null">
        #{vertifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="operatorId != null">
        #{operatorId,jdbcType=INTEGER},
      </if>
      <if test="showStatus != null">
        #{showStatus,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.myfun.repository.agencydb.po.AgencyWfRecomHouseEva">
    <!--@mbggenerated-->
    update WF_RECOM_HOUSE_EVA
    <set>
      <if test="wxId != null">
        WX_ID = #{wxId,jdbcType=INTEGER},
      </if>
      <if test="pushLogId != null">
        PUSH_LOG_ID = #{pushLogId,jdbcType=INTEGER},
      </if>
      <if test="recomHouseId != null">
        RECOM_HOUSE_ID = #{recomHouseId,jdbcType=INTEGER},
      </if>
      <if test="archiveId != null">
        ARCHIVE_ID = #{archiveId,jdbcType=INTEGER},
      </if>
      <if test="realHouse != null">
        REAL_HOUSE = #{realHouse,jdbcType=TINYINT},
      </if>
      <if test="evaTag != null">
        EVA_TAG = #{evaTag,jdbcType=VARCHAR},
      </if>
      <if test="evaStar != null">
        EVA_STAR = #{evaStar,jdbcType=TINYINT},
      </if>
      <if test="evaContent != null">
        EVA_CONTENT = #{evaContent,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="cityId != null">
        CITY_ID = #{cityId,jdbcType=INTEGER},
      </if>
      <if test="isVertify != null">
        IS_VERTIFY = #{isVertify,jdbcType=TINYINT},
      </if>
      <if test="vertifyTime != null">
        VERTIFY_TIME = #{vertifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="operatorId != null">
        OPERATOR_ID = #{operatorId,jdbcType=INTEGER},
      </if>
      <if test="showStatus != null">
        SHOW_STATUS = #{showStatus,jdbcType=INTEGER},
      </if>
    </set>
    where ID = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.myfun.repository.agencydb.po.AgencyWfRecomHouseEva">
    <!--@mbggenerated-->
    update WF_RECOM_HOUSE_EVA
    set WX_ID = #{wxId,jdbcType=INTEGER},
      PUSH_LOG_ID = #{pushLogId,jdbcType=INTEGER},
      RECOM_HOUSE_ID = #{recomHouseId,jdbcType=INTEGER},
      ARCHIVE_ID = #{archiveId,jdbcType=INTEGER},
      REAL_HOUSE = #{realHouse,jdbcType=TINYINT},
      EVA_TAG = #{evaTag,jdbcType=VARCHAR},
      EVA_STAR = #{evaStar,jdbcType=TINYINT},
      EVA_CONTENT = #{evaContent,jdbcType=VARCHAR},
      CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      CITY_ID = #{cityId,jdbcType=INTEGER},
      IS_VERTIFY = #{isVertify,jdbcType=TINYINT},
      VERTIFY_TIME = #{vertifyTime,jdbcType=TIMESTAMP},
      OPERATOR_ID = #{operatorId,jdbcType=INTEGER},
      SHOW_STATUS = #{showStatus,jdbcType=INTEGER}
    where ID = #{id,jdbcType=INTEGER}
  </update>
  <resultMap type="com.myfun.repository.agencydb.dto.AgencyWfRecomHouseEvaDto" id="BaseResultMapDto" extends="BaseResultMap">
    <result column="trueHouseRate" jdbcType="VARCHAR" property="trueHouseRate"/>
  </resultMap>
<select id="getTrueRateByArchiveId" resultMap="BaseResultMapDto">
	select ARCHIVE_ID ,(sum(iif(REAL_HOUSE = 1,1,0))+0.0)/sum(1) as trueHouseRate 
	from WF_RECOM_HOUSE_EVA  where CITY_ID = #{cityId} and ARCHIVE_ID=#{archiveId} GROUP BY ARCHIVE_ID
</select>  
</mapper>